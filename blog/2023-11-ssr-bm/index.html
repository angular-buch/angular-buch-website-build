<!DOCTYPE html><html lang="de" data-critters-container=""><head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#"><meta name="generator" content="Scully 0.0.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <title>Angular-Buch → Book Monkey v5: Server-Side Rendering mit Angular 17</title>
  

  

  <meta property="book:author" content="https://www.facebook.com/ferdinand.malcher">
  <meta property="book:author" content="https://www.facebook.com/johannes.hoppe">

  <meta property="book:isbn" content="9783864909467">
  <meta property="book:release_date" content="2023-02-28">
  <meta property="book:tag" content="Angular">
  <meta property="book:tag" content="Webentwicklung">
  <meta property="book:tag" content="AngularJS">
  <meta property="book:tag" content="TypeScript">
  <meta property="book:tag" content="JavaScript">
  <meta property="book:tag" content="HTML5">
  <meta property="book:tag" content="CSS">
  <meta property="book:tag" content="RxJS">
  <meta property="book:tag" content="Redux">
  <meta property="book:tag" content="NgRx">

  <base href="/">
<style>@charset "UTF-8";@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@font-face{font-family:Roboto;src:url("./media/Roboto-Thin-GAS35NAQ.eot");src:local("Roboto Thin"),local("Roboto-Thin"),url("./media/Roboto-Thin-GAS35NAQ.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Thin-UUU7IP4L.woff2") format("woff2"),url("./media/Roboto-Thin-BT5WDCMC.woff") format("woff"),url("./media/Roboto-Thin-STLHGJGZ.ttf") format("truetype"),url("./media/Roboto-Thin-OYOYLS5N.svg#Roboto") format("svg");font-weight:100;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-ThinItalic-HQCJJ3KQ.eot");src:local("Roboto ThinItalic"),local("Roboto-ThinItalic"),url("./media/Roboto-ThinItalic-HQCJJ3KQ.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-ThinItalic-PVCCLVHZ.woff2") format("woff2"),url("./media/Roboto-ThinItalic-OJCFQICS.woff") format("woff"),url("./media/Roboto-ThinItalic-OKVQEY6M.ttf") format("truetype"),url("./media/Roboto-ThinItalic-PU7U6F54.svg#Roboto") format("svg");font-weight:100;font-style:italic}@font-face{font-family:Roboto;src:url("./media/Roboto-Light-TT7V6J7W.eot");src:local("Roboto Light"),local("Roboto-Light"),url("./media/Roboto-Light-TT7V6J7W.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Light-OEL5QP53.woff2") format("woff2"),url("./media/Roboto-Light-EGEOUPZ7.woff") format("woff"),url("./media/Roboto-Light-KYCYMX5R.ttf") format("truetype"),url("./media/Roboto-Light-O5NB3DZS.svg#Roboto") format("svg");font-weight:300;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-LightItalic-JJ225GLJ.eot");src:local("Roboto LightItalic"),local("Roboto-LightItalic"),url("./media/Roboto-LightItalic-JJ225GLJ.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-LightItalic-SZU3UOEY.woff2") format("woff2"),url("./media/Roboto-LightItalic-5LJGTDBY.woff") format("woff"),url("./media/Roboto-LightItalic-ZTOFFLND.ttf") format("truetype"),url("./media/Roboto-LightItalic-FE5GYQJO.svg#Roboto") format("svg");font-weight:300;font-style:italic}@font-face{font-family:Roboto;src:url("./media/Roboto-Regular-WINA5356.eot");src:local("Roboto Regular"),local("Roboto-Regular"),url("./media/Roboto-Regular-WINA5356.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Regular-4ZFX4XNS.woff2") format("woff2"),url("./media/Roboto-Regular-EMJ7NDAQ.woff") format("woff"),url("./media/Roboto-Regular-W6LM4ZNI.ttf") format("truetype"),url("./media/Roboto-Regular-DDBAS5OS.svg#Roboto") format("svg");font-weight:400;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-RegularItalic-43QNLNAN.eot");src:local("Roboto RegularItalic"),local("Roboto-RegularItalic"),url("./media/Roboto-RegularItalic-43QNLNAN.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-RegularItalic-2REFJECD.woff2") format("woff2"),url("./media/Roboto-RegularItalic-NSJ4HBKT.woff") format("woff"),url("./media/Roboto-RegularItalic-YZDJVEXU.ttf") format("truetype"),url("./media/Roboto-RegularItalic-7A3VJZ2J.svg#Roboto") format("svg");font-weight:400;font-style:italic}@font-face{font-family:Roboto;src:url("./media/Roboto-Medium-TKOJIIN4.eot");src:local("Roboto Medium"),local("Roboto-Medium"),url("./media/Roboto-Medium-TKOJIIN4.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Medium-GHCC3HN6.woff2") format("woff2"),url("./media/Roboto-Medium-O2PKKQNT.woff") format("woff"),url("./media/Roboto-Medium-ANIBKV6W.ttf") format("truetype"),url("./media/Roboto-Medium-RJM2M5RS.svg#Roboto") format("svg");font-weight:500;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-MediumItalic-5WUL7G7J.eot");src:local("Roboto MediumItalic"),local("Roboto-MediumItalic"),url("./media/Roboto-MediumItalic-5WUL7G7J.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-MediumItalic-FMJUHMWQ.woff2") format("woff2"),url("./media/Roboto-MediumItalic-EJXCUUAA.woff") format("woff"),url("./media/Roboto-MediumItalic-ZZ274MH6.ttf") format("truetype"),url("./media/Roboto-MediumItalic-WUJRBJ2B.svg#Roboto") format("svg");font-weight:500;font-style:italic}@font-face{font-family:Roboto;src:url("./media/Roboto-Bold-BUUHB5PB.eot");src:local("Roboto Bold"),local("Roboto-Bold"),url("./media/Roboto-Bold-BUUHB5PB.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Bold-NGAPMV26.woff2") format("woff2"),url("./media/Roboto-Bold-GE6V3ZS2.woff") format("woff"),url("./media/Roboto-Bold-5VUU6QI6.ttf") format("truetype"),url("./media/Roboto-Bold-UXMYHWKZ.svg#Roboto") format("svg");font-weight:700;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-BoldItalic-ETKPZE3Z.eot");src:local("Roboto BoldItalic"),local("Roboto-BoldItalic"),url("./media/Roboto-BoldItalic-ETKPZE3Z.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-BoldItalic-TBVJ3OTX.woff2") format("woff2"),url("./media/Roboto-BoldItalic-2CYTLDZJ.woff") format("woff"),url("./media/Roboto-BoldItalic-4MMIXUDR.ttf") format("truetype"),url("./media/Roboto-BoldItalic-TDTZWBKI.svg#Roboto") format("svg");font-weight:700;font-style:italic}@font-face{font-family:Roboto;src:url("./media/Roboto-Black-FJBQ2JLX.eot");src:local("Roboto Black"),local("Roboto-Black"),url("./media/Roboto-Black-FJBQ2JLX.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Black-OEG2WEQ3.woff2") format("woff2"),url("./media/Roboto-Black-AZ2AXCB4.woff") format("woff"),url("./media/Roboto-Black-IGTRSQU4.ttf") format("truetype"),url("./media/Roboto-Black-OEOHVSYK.svg#Roboto") format("svg");font-weight:900;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-BlackItalic-MXNS7VU5.eot");src:local("Roboto BlackItalic"),local("Roboto-BlackItalic"),url("./media/Roboto-BlackItalic-MXNS7VU5.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-BlackItalic-6QYHVQZM.woff2") format("woff2"),url("./media/Roboto-BlackItalic-7QMDFEK5.woff") format("woff"),url("./media/Roboto-BlackItalic-XIXMO2HU.ttf") format("truetype"),url("./media/Roboto-BlackItalic-EYMGZCJW.svg#Roboto") format("svg");font-weight:900;font-style:italic}:root{--blue: #007bff;--indigo: #6610f2;--purple: #6f42c1;--pink: #e83e8c;--red: #dc3545;--orange: #fd7e14;--yellow: #ffc107;--green: #28a745;--teal: #20c997;--cyan: #17a2b8;--white: #fff;--gray: #6c757d;--gray-dark: #343a40;--primary: #007bff;--secondary: #6c757d;--success: #28a745;--info: #17a2b8;--warning: #ffc107;--danger: #dc3545;--light: #f8f9fa;--dark: #343a40;--breakpoint-xs: 0;--breakpoint-sm: 576px;--breakpoint-md: 768px;--breakpoint-lg: 992px;--breakpoint-xl: 1200px;--font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}*,*:before,*:after{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,Liberation Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}@media print{*,*:before,*:after{text-shadow:none!important;box-shadow:none!important}img{page-break-inside:avoid}@page{size:a3}body{min-width:992px!important}}body{color:#1e1e1e;font-family:"Roboto","Helvetica Neue",Helvetica,Arial sans-serif;font-size:16px;line-height:1.35em;font-weight:400;background:#f8f8f8}html{overflow-y:scroll}
</style><link rel="stylesheet" href="styles-24WBZHAI.css" media="all" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-24WBZHAI.css"></noscript><link rel="modulepreload" href="chunk-XEHRAMOY.js"><link rel="modulepreload" href="chunk-RRT2ZFID.js"><link rel="modulepreload" href="chunk-OYIJ527B.js"><link rel="modulepreload" href="chunk-WXI33M2S.js"><link rel="modulepreload" href="chunk-2JEB7WH5.js"><link rel="modulepreload" href="chunk-UV2LA6EF.js"><link rel="modulepreload" href="chunk-VK4APRCY.js"><meta property="og:title" content="Angular-Buch → Book Monkey v5: Server-Side Rendering mit Angular 17"><meta name="twitter:title" content="Angular-Buch → Book Monkey v5: Server-Side Rendering mit Angular 17"><meta name="description" content="📙 Mit Angular 17 wurde der Build-Prozess für Server-Side Rendering (SSR) und Pre-Rendering grundlegend überarbeitet.
In diesem Blogpost stellen wir vor, welche Unterschiede für das Beispielprojekt &amp;quot;BookMonkey&amp;quot; aus dem Angular-Buch relevant sind."><meta property="og:description" content="📙 Mit Angular 17 wurde der Build-Prozess für Server-Side Rendering (SSR) und Pre-Rendering grundlegend überarbeitet.
In diesem Blogpost stellen wir vor, welche Unterschiede für das Beispielprojekt &amp;quot;BookMonkey&amp;quot; aus dem Angular-Buch relevant sind."><meta name="twitter:description" content="📙 Mit Angular 17 wurde der Build-Prozess für Server-Side Rendering (SSR) und Pre-Rendering grundlegend überarbeitet.
In diesem Blogpost stellen wir vor, welche Unterschiede für das Beispielprojekt &amp;quot;BookMonkey&amp;quot; aus dem Angular-Buch relevant sind."><meta name="twitter:site" content="@angular_buch"><meta property="og:locale" content="de"><meta property="og:type" content="website"><meta property="og:url" content="https://angular-buch.com/blog/2023-11-ssr-bm"><style>.width-6{width:6.5rem}.width-8{width:8rem}.linkImage{margin-right:3px;margin-top:-3px}
</style><style>.content img{max-width:100%}.details-page-autor{margin-top:-110px}.details-thumbnail{margin-bottom:-18px}.details-thumbnail .details-thumbnail-inner{border-bottom:23px solid #dfdede;max-height:300px;overflow:hidden;background-color:#fff;border-radius:4px;display:flex;justify-content:center}.details-thumbnail .details-thumbnail-inner .darken-overlay{display:block;position:absolute;height:300px;width:100%;padding-left:15px;padding-right:15px;padding-bottom:23px}.details-thumbnail .details-thumbnail-inner .darken-overlay div{display:block;position:relative;width:100%;height:100%;background-color:#0003;border-radius:4px 4px 0 0/4px 4px 0px 0px}.details-thumbnail img{width:100%;align-self:center}.video-container{position:relative;padding-bottom:56.25%;padding-top:0;height:0;overflow:hidden;margin-top:2rem;margin-bottom:2rem}.video-container iframe,.video-container object,.video-container embed{position:absolute;top:0;left:0;width:100%;height:100%}
</style><meta property="og:image" content="https://website-articles.angular-buch.com/blog/2023-11-ssr-bm/bm.jpg"><meta name="twitter:image" content="https://website-articles.angular-buch.com/blog/2023-11-ssr-bm/bm.jpg"><meta name="twitter:card" content="summary_large_image"><script>window['ScullyIO']='generated';</script></head>
<body scully-version="0.0.0">
  <app-root ng-version="17.2.1"><header><div class="nav__overlay"></div><div class="container"><div class="row no-gutters align-items-center"><div class="col-6 col-md-2"><a routerlink="/" aria-label="Startseite" href="/"><img src="assets/img/brand-400.png" alt="Angular-Buch.com" height="40" width="126" class="img-fluid"></a></div><div class="col-6 col-md-10"><nav><ul><li><app-link><!----><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/"><!----> Buch </a><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/blog" class="nav__current" aria-current="page"><!----> Blog </a><!----><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/material"><!----> Begleitmaterial </a><!----><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/kaufen"><img alt="" class="linkImage ls-is-cached lazyloaded" data-src="assets/img/symbol-basket.svg" src="assets/img/symbol-basket.svg"><!----> Jetzt kaufen </a><!----><!----><!----></app-link></li><li><app-link><!----><a class="order" href="//angular.schule/"><img alt="" class="linkImage ls-is-cached lazyloaded" data-src="assets/img/symbol-group.svg" src="assets/img/symbol-group.svg"><!----> Schulungen </a><!----><!----><!----><!----></app-link></li><!----></ul></nav><a href="/" aria-label="Navigation" class="nav__toggle"><img src="assets/img/symbol-menu.svg" alt=""></a></div></div></div></header><main><router-outlet></router-outlet><app-blog-details><app-hero-header headline="Blog" headlinelink="/blog"><section class="hero hero--smaller"><div class="hero__lines"><div class="container"><div class="row justify-content-between"><div class="col-md-6 col-xs-12"><h1 class="headline__page headline__page--blank headline__page--space-bottom"><a style="color: white;" href="/blog">Blog</a><!----><!----></h1></div></div></div></div></section><a name="content" id="content"></a></app-hero-header><section class="index index--list blog mt-n5"><div class="index__stripe index__stripe--list"><div class="container"><a name="post" id="post"></a><div class="row details-thumbnail"><div class="col-12"><div class="details-thumbnail-inner"><img alt="" class="img-fluid rounded ls-is-cached lazyloaded" data-src="https://website-articles.angular-buch.com/blog/2023-11-ssr-bm/bm.jpg" src="https://website-articles.angular-buch.com/blog/2023-11-ssr-bm/bm.jpg"><!----></div></div><!----></div><div class="row"><div class="col-12"><div class="index__item index__item--list"><div class="row align-items-top"><div class="col-12 col-sm-3 col-md-2 text-center details-page-autor"><img alt="" class="blog__portrait img-fluid rounded-circle ls-is-cached lazyloaded" data-src="//www.gravatar.com/avatar/f8288b8ea201b010dff3b24198019cc3?size=200&amp;rating=pg&amp;d=mm" src="//www.gravatar.com/avatar/f8288b8ea201b010dff3b24198019cc3?size=200&amp;rating=pg&amp;d=mm"><span class="blog__author">Ferdinand Malcher <br><a target="_blank" class="twitter" href="https://twitter.com/fmalcher01"> @fmalcher01</a> &nbsp; <!----></span></div><div class="col-12 col-sm-9 col-md-10 col-lg-10"><h1 class="blog__headline">Book Monkey v5: Server-Side Rendering mit Angular 17</h1><p class="blog__date">21.11.2023</p><p class="content markdown-body"><p>Mit Angular 17 wurde der Build-Prozess für Server-Side Rendering (SSR) und Pre-Rendering grundlegend überarbeitet.
In diesem Blogpost stellen wir vor, welche Unterschiede für das Beispielprojekt "BookMonkey" aus dem Angular-Buch relevant sind.</p>
<h2 id="der-neue-application-builder">Der neue Application Builder</h2>
<p>Mit Angular 17 wurde Server-Side Rendering noch tiefer in Angular integriert.
Schon beim Anlegen eines neuen Projekts mit <code>ng new</code> können wir die Unterstützung für SSR sofort aktivieren.</p>
<p>Um den gesamten Build-Prozess zu harmonisieren, wurde außerdem der neue <em>Application Builder</em> eingeführt: Er vereint den Build für Browser und Server, sodass beide Schritte mit einem Befehl gemeinsam erledigt werden können.</p>
<p>Der neue Builder ist in neuen Projekten mit Angular 17 automatisch aktiv.
Wir haben darüber bereits im <a href="/blog/2023-11-angular17">Blogpost zum Angular-Release 17</a> berichtet.</p>
<h2 id="ssr-einrichten">SSR einrichten</h2>
<p>Um Server-Side Rendering und Pre-Rendering in einer bestehenden Anwendung einzurichten, wird ab sofort das neue Paket <code>@angular/ssr</code> verwendet.
Das bisherige Paket <code>@nguniversal/express-engine</code>, das wir im Buch verwenden, wird nicht mehr genutzt.</p>
<pre><code class="language-bash">ng <span class="hljs-keyword">add</span> <span class="hljs-title">@angular</span>/ssr
</code></pre>
<h2 id="unterschiede-in-den-generierten-dateien">Unterschiede in den generierten Dateien</h2>
<p>Nachdem die Einrichtung von SSR abgeschlossen ist, können wir die Änderungen an den Dateien nachvollziehen.
Wir haben im Buch ausführlich beschrieben, welche Aspekte dabei wichtig sind.
Der grundlegende Ablauf ist noch immer der gleiche – der Code sieht jedoch anders aus.
Wir haben den Code im <a href="https://github.com/book-monkey5/16f-ssr">GitHub-Repo für den BookMonkey</a> aktualisiert.</p>
<h3 id="skripte-in-der-datei-packagejson">Skripte in der Datei <code>package.json</code></h3>
<p>Bisher wurden in der Datei <code>package.json</code> mehrere Skripte hinzugefügt, mit denen die Builder für SSR und Pre-Rendering angestoßen werden können.
Da der Application Builder nun alle diese Aspekte übernimmt, wird nur noch ein einziges Skript hinzugefügt.
Es ist dafür verantwortlich, die SSR-Anwendung nach dem Build zu starten.</p>
<pre><code class="language-json">{
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-attr">"serve:ssr:book-monkey"</span>: <span class="hljs-string">"node dist/book-monkey/server/server.mjs"</span>
  }
}
</code></pre>
<p>Der gesamte Build wird nun mit dem gewohnten Befehl <code>ng build</code> angestoßen und beinhaltet auch den Teil für den Server und die statisch generierten HTML-Dateien für Pre-Rendering.
Das Verhalten können wir in der Datei <code>angular.json</code> konfigurieren.</p>
<h3 id="konfiguration-in-der-datei-angularjson">Konfiguration in der Datei <code>angular.json</code></h3>
<p>In der Datei <code>angular.json</code> wird der Application Builder konfiguriert.
Bisher waren hier einzelne <em>Build Targets</em> für SSR und Pre-Rendering notwendig. Der neue Builder vereint alle Teile unter dem Target <code>build</code>.
Das bedeutet auch, dass nur noch der Befehl <code>ng build</code> notwendig ist, um den gesamten Build auszuführen. Dabei wird die Anwendung also nicht nur für den Browser gebaut, sondern es wird auch der Node.js-Server für SSR generiert, und die statischen HTML-Dateien aus den Routen werden mithilfe von Pre-Rendering erzeugt.</p>
<p>SSR und Pre-Rendering können in der <code>angular.json</code> separat aktiviert und gesteuert werden.
Die folgenden neuen Einträge sind hier nach der Einrichtung zu finden:</p>
<pre><code class="language-json">{
  <span class="hljs-attr">"projects"</span>: {
    <span class="hljs-attr">"book-monkey"</span>: {
      <span class="hljs-attr">"architect"</span>: {
        <span class="hljs-attr">"build"</span>: {
          <span class="hljs-comment">// ...</span>
          <span class="hljs-attr">"server"</span>: <span class="hljs-string">"src/main.server.ts"</span>,
          <span class="hljs-attr">"prerender"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">"ssr"</span>: {
            <span class="hljs-attr">"entry"</span>: <span class="hljs-string">"server.ts"</span>
          }
        }
      }
    }
  }
}
</code></pre>
<h3 id="pre-rendering-konfigurieren">Pre-Rendering konfigurieren</h3>
<p>Im Buch haben wir gezeigt, wie wir die Liste der Routen für Pre-Rendering manuell übergeben können.
Ab sofort muss diese Liste in einer Datei abgelegt und in der <code>angular.json</code> referenziert werden.
Anstatt dem Wert <code>true</code> können wir für <code>prerender</code> das folgende Konfigurationsobjekt übergeben:</p>
<pre><code class="language-json"><span class="hljs-string">"prerender"</span>: {
  <span class="hljs-string">"discoverRoutes"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-string">"routesFile"</span>: <span class="hljs-string">"routes.txt"</span>
},
</code></pre>
<p>Die Datei <code>routes.txt</code> liegt im Root-Verzeichnis des Projekts und hat den folgenden Inhalt.
Bisher hatten wir diese Liste in der <code>angular.json</code> definiert.</p>
<pre><code>/
/home
/books
<span class="hljs-regexp">/books/</span><span class="hljs-number">9783864909467</span>
<span class="hljs-regexp">/books/</span><span class="hljs-number">9783864907791</span>
<span class="hljs-regexp">/books/</span><span class="hljs-number">9783864906466</span>
<span class="hljs-regexp">/books/</span><span class="hljs-number">9783864903571</span>
</code></pre>
<h3 id="sonstige-änderungen">Sonstige Änderungen</h3>
<ul>
<li>Die Datei <code>server.ts</code> beinhaltet weiterhin einen Express-Server für den SSR-Prozess. Hier wird nun allerdings die neue <code>CommonEngine</code> aus dem Paket <code>@angular/ssr</code> verwendet. Der Aufbau wird dadurch vereinfacht.</li>
<li>Im <code>AppModule</code> wird automatisch der Eintrag <code>provideClientHydration()</code> unter <code>providers</code> hinzugefügt. Damit wird die Client-Side Hydration aktiviert. Wir haben darüber im <a href="/blog/2023-05-angular16">Blogpost zu Angular 16</a> berichtet.</li>
<li>Die Datei <code>app.server.module.ts</code> wurde umbenannt zu <code>app.module.server.ts</code>. Der Inhalt ist weiterhin derselbe.</li>
</ul>
<h2 id="bestehendes-projekt-updaten">Bestehendes Projekt updaten</h2>
<p>Wenn Sie ein bestehendes Projekt auf Angular 17 aktualisieren, sorgen die Migrationsskripte hinter <code>ng update</code> dafür, dass automatisch das neue Paket <code>@angular/ssr</code> verwendet wird.
Dabei wird allerdings nicht automatisch der neue Application Builder eingerichtet, sondern es werden weiterhin die bisherigen Builder für SSR und Pre-Rendering genutzt, die in das Paket <code>@angular-devkit/build-angular</code> umgezogen wurden.</p>
<pre><code>❯ Replace usages <span class="hljs-keyword">of</span> <span class="hljs-string">'@nguniversal/builders'</span> <span class="hljs-keyword">with</span> <span class="hljs-string">'@angular-devkit/build-angular'</span>.
<span class="hljs-keyword">UPDATE</span> angular.json (<span class="hljs-number">5182</span> bytes)
<span class="hljs-keyword">UPDATE</span> package.json (<span class="hljs-number">1903</span> bytes)
  Migration completed (<span class="hljs-number">2</span> files modified).

❯ Replace usages <span class="hljs-keyword">of</span> <span class="hljs-string">'@nguniversal/'</span> packages <span class="hljs-keyword">with</span> <span class="hljs-string">'@angular/ssr'</span>.
<span class="hljs-keyword">RENAME</span> <span class="hljs-keyword">server</span>.ts =&gt; <span class="hljs-keyword">server</span>.ts.bak
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">server</span>.ts (<span class="hljs-number">2206</span> bytes)
<span class="hljs-keyword">UPDATE</span> package.json (<span class="hljs-number">1887</span> bytes)
✔ Packages installed successfully.
  Migration completed (<span class="hljs-number">2</span> files modified).
</code></pre>
<p>Wenn Sie von hier aus den Application Builder nutzen möchten, ist eine manuelle Migration notwendig.
Die grundlegenden Schritte haben wir im <a href="/blog/2023-11-angular17">Blogpost zu Angular 17</a> beschrieben.</p>
<h2 id="fazit">Fazit</h2>
<p>Die Einrichtung und Konfiguration von SSR und Pre-Rendering funktioniert mit Angular 17 und dem neuen Application Builder anders als zuvor.
Für bestehende Projekte ist damit zwar etwas Aufwand zur Migration nötig – wir begrüßen allerdings sehr, dass der Build-Prozess harmonisiert wird und das Thema SSR mehr in den Fokus rückt.</p>
<p>Sie können weiterhin auch die bestehenden Builder nutzen, die aus dem Paket <code>@nguniversal/express-engine</code> nach <code>@angular-devkit/build-angular</code> verschoben wurden.
Dennoch empfehlen wir Ihnen den Umstieg auf den Application Builder, um alle Vorteile und Optimierungen sofort zu nutzen.</p>
<p>An den konzeptionellen Grundlagen zu SSR, die wir im Buch ausführlich beschrieben haben, ändert sich darüber hinaus nichts.
Der Ablauf ist noch immer der gleiche – nur die Umsetzung im Code hat sich mit Angular 17 geändert.</p>
<hr>

<p><small><strong>Titelbild:</strong> Photo by <a href="https://unsplash.com/@fotograw">Dmitriy Demidov</a> on <a href="https://unsplash.com/s/photos/wrench">Unsplash</a></small></p>
</p><!----><!----><a routerlink="/blog" ripple-radius="" class="btn btn-sm btn-primary mt-4" href="/blog"><i class="fa fa-backward mr-2"></i> Zurück</a><hr> Suggestions? Feedback? Bugs? Please <a target="_blank" class="content" href="https://github.com/angular-buch/website-articles/blob/gh-pages/blog/2023-11-ssr-bm/README.md"><i class="fa fa-github mr-1" style="font-size: 1.6rem; position: relative; bottom: -3px;"></i>fork/edit this page on Github</a>. </div></div></div></div></div><!----></div><!----><!----></div></section><app-json-ld><script type="application/ld+json">{
  "url": "https://angular.schule/blog/2023-11-ssr-bm",
  "headline": "Book Monkey v5: Server-Side Rendering mit Angular 17",
  "description": "Mit Angular 17 wurde der Build-Prozess für Server-Side Rendering (SSR) und Pre-Rendering grundlegend überarbeitet.\nIn diesem Blogpost stellen wir vor, welche Unterschiede für das Beispielprojekt &quot;BookMonkey&quot; aus dem Angular-Buch relevant sind.",
  "datePublished": "2023-11-21",
  "dateModified": "2023-11-21",
  "publisher": {
    "name": "Angular-Buch",
    "url": "https://angular-buch.com",
    "@type": "Organization",
    "logo": {
      "@type": "ImageObject",
      "url": "https://angular-buch.com/assets/img/brand_export.png"
    }
  },
  "image": "https://website-articles.angular-buch.com/blog/2023-11-ssr-bm/bm.jpg",
  "thumbnailUrl": "https://website-articles.angular-buch.com/blog/2023-11-ssr-bm/bm.jpg",
  "author": {
    "@type": "Person",
    "name": "Ferdinand Malcher",
    "email": "ferdinand@malcher.media"
  },
  "keywords": [
    "Server-Side Rendering",
    "Pre-Rendering",
    "ESBuild",
    "Application Builder",
    "BookMonkey"
  ],
  "mainEntityOfPage": "http://schema.org/WebPage",
  "@type": "Article",
  "@context": "http://schema.org"
}</script></app-json-ld></app-blog-details><!----><footer><div class="container"><div class="row align-items-center"><div class="col-sm-9"><div class="links"><app-link><!----><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/"><!----> Home </a><!----><!----></app-link>|<!----><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/impressum"><!----> Impressum </a><!----><!----><!----></app-link>|<!----><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/datenschutz"><!----> Datenschutzerklärung </a><!----><!----><!----></app-link>|<!----><app-link><!----><a class="links__item links__twitter" href="https://twitter.com/angular_buch" rel="nofollow"><!----> Twitter </a><!----><!----><!----><!----></app-link><!----><!----></div></div><div class="col-sm-3 text-right"></div></div></div></footer></main><app-json-ld><script type="application/ld+json"></script></app-json-ld></app-root>
<script src="polyfills-LZBJRJJE.js" type="module"></script><script src="main-4OOTAVKH.js" type="module"></script>

</body></html>