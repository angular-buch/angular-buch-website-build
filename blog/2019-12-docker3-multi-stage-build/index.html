<!DOCTYPE html><html lang="de" data-critters-container=""><head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#"><meta name="generator" content="Scully 0.0.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <title>Angular-Buch ‚Üí [Docker Serie 4/4] Multi-Stage Builds oder: Immer die Build-Umgebung dabei haben</title>
  

  

  <meta property="book:author" content="https://www.facebook.com/ferdinand.malcher">
  <meta property="book:author" content="https://www.facebook.com/johannes.hoppe">

  <meta property="book:isbn" content="9783864909467">
  <meta property="book:release_date" content="2023-02-28">
  <meta property="book:tag" content="Angular">
  <meta property="book:tag" content="Webentwicklung">
  <meta property="book:tag" content="AngularJS">
  <meta property="book:tag" content="TypeScript">
  <meta property="book:tag" content="JavaScript">
  <meta property="book:tag" content="HTML5">
  <meta property="book:tag" content="CSS">
  <meta property="book:tag" content="RxJS">
  <meta property="book:tag" content="Redux">
  <meta property="book:tag" content="NgRx">

  <base href="/">
<style>@charset "UTF-8";@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@font-face{font-family:Roboto;src:url(./media/Roboto-Thin-GAS35NAQ.eot);src:local("Roboto Thin"),local("Roboto-Thin"),url(./media/Roboto-Thin-GAS35NAQ.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-Thin-UUU7IP4L.woff2) format("woff2"),url(./media/Roboto-Thin-BT5WDCMC.woff) format("woff"),url(./media/Roboto-Thin-STLHGJGZ.ttf) format("truetype"),url(./media/Roboto-Thin-OYOYLS5N.svg#Roboto) format("svg");font-weight:100;font-style:normal}@font-face{font-family:Roboto;src:url(./media/Roboto-ThinItalic-HQCJJ3KQ.eot);src:local("Roboto ThinItalic"),local("Roboto-ThinItalic"),url(./media/Roboto-ThinItalic-HQCJJ3KQ.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-ThinItalic-PVCCLVHZ.woff2) format("woff2"),url(./media/Roboto-ThinItalic-OJCFQICS.woff) format("woff"),url(./media/Roboto-ThinItalic-OKVQEY6M.ttf) format("truetype"),url(./media/Roboto-ThinItalic-PU7U6F54.svg#Roboto) format("svg");font-weight:100;font-style:italic}@font-face{font-family:Roboto;src:url(./media/Roboto-Light-TT7V6J7W.eot);src:local("Roboto Light"),local("Roboto-Light"),url(./media/Roboto-Light-TT7V6J7W.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-Light-OEL5QP53.woff2) format("woff2"),url(./media/Roboto-Light-EGEOUPZ7.woff) format("woff"),url(./media/Roboto-Light-KYCYMX5R.ttf) format("truetype"),url(./media/Roboto-Light-O5NB3DZS.svg#Roboto) format("svg");font-weight:300;font-style:normal}@font-face{font-family:Roboto;src:url(./media/Roboto-LightItalic-JJ225GLJ.eot);src:local("Roboto LightItalic"),local("Roboto-LightItalic"),url(./media/Roboto-LightItalic-JJ225GLJ.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-LightItalic-SZU3UOEY.woff2) format("woff2"),url(./media/Roboto-LightItalic-5LJGTDBY.woff) format("woff"),url(./media/Roboto-LightItalic-ZTOFFLND.ttf) format("truetype"),url(./media/Roboto-LightItalic-FE5GYQJO.svg#Roboto) format("svg");font-weight:300;font-style:italic}@font-face{font-family:Roboto;src:url(./media/Roboto-Regular-WINA5356.eot);src:local("Roboto Regular"),local("Roboto-Regular"),url(./media/Roboto-Regular-WINA5356.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-Regular-4ZFX4XNS.woff2) format("woff2"),url(./media/Roboto-Regular-EMJ7NDAQ.woff) format("woff"),url(./media/Roboto-Regular-W6LM4ZNI.ttf) format("truetype"),url(./media/Roboto-Regular-DDBAS5OS.svg#Roboto) format("svg");font-weight:400;font-style:normal}@font-face{font-family:Roboto;src:url(./media/Roboto-RegularItalic-43QNLNAN.eot);src:local("Roboto RegularItalic"),local("Roboto-RegularItalic"),url(./media/Roboto-RegularItalic-43QNLNAN.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-RegularItalic-2REFJECD.woff2) format("woff2"),url(./media/Roboto-RegularItalic-NSJ4HBKT.woff) format("woff"),url(./media/Roboto-RegularItalic-YZDJVEXU.ttf) format("truetype"),url(./media/Roboto-RegularItalic-7A3VJZ2J.svg#Roboto) format("svg");font-weight:400;font-style:italic}@font-face{font-family:Roboto;src:url(./media/Roboto-Medium-TKOJIIN4.eot);src:local("Roboto Medium"),local("Roboto-Medium"),url(./media/Roboto-Medium-TKOJIIN4.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-Medium-GHCC3HN6.woff2) format("woff2"),url(./media/Roboto-Medium-O2PKKQNT.woff) format("woff"),url(./media/Roboto-Medium-ANIBKV6W.ttf) format("truetype"),url(./media/Roboto-Medium-RJM2M5RS.svg#Roboto) format("svg");font-weight:500;font-style:normal}@font-face{font-family:Roboto;src:url(./media/Roboto-MediumItalic-5WUL7G7J.eot);src:local("Roboto MediumItalic"),local("Roboto-MediumItalic"),url(./media/Roboto-MediumItalic-5WUL7G7J.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-MediumItalic-FMJUHMWQ.woff2) format("woff2"),url(./media/Roboto-MediumItalic-EJXCUUAA.woff) format("woff"),url(./media/Roboto-MediumItalic-ZZ274MH6.ttf) format("truetype"),url(./media/Roboto-MediumItalic-WUJRBJ2B.svg#Roboto) format("svg");font-weight:500;font-style:italic}@font-face{font-family:Roboto;src:url(./media/Roboto-Bold-BUUHB5PB.eot);src:local("Roboto Bold"),local("Roboto-Bold"),url(./media/Roboto-Bold-BUUHB5PB.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-Bold-NGAPMV26.woff2) format("woff2"),url(./media/Roboto-Bold-GE6V3ZS2.woff) format("woff"),url(./media/Roboto-Bold-5VUU6QI6.ttf) format("truetype"),url(./media/Roboto-Bold-UXMYHWKZ.svg#Roboto) format("svg");font-weight:700;font-style:normal}@font-face{font-family:Roboto;src:url(./media/Roboto-BoldItalic-ETKPZE3Z.eot);src:local("Roboto BoldItalic"),local("Roboto-BoldItalic"),url(./media/Roboto-BoldItalic-ETKPZE3Z.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-BoldItalic-TBVJ3OTX.woff2) format("woff2"),url(./media/Roboto-BoldItalic-2CYTLDZJ.woff) format("woff"),url(./media/Roboto-BoldItalic-4MMIXUDR.ttf) format("truetype"),url(./media/Roboto-BoldItalic-TDTZWBKI.svg#Roboto) format("svg");font-weight:700;font-style:italic}@font-face{font-family:Roboto;src:url(./media/Roboto-Black-FJBQ2JLX.eot);src:local("Roboto Black"),local("Roboto-Black"),url(./media/Roboto-Black-FJBQ2JLX.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-Black-OEG2WEQ3.woff2) format("woff2"),url(./media/Roboto-Black-AZ2AXCB4.woff) format("woff"),url(./media/Roboto-Black-IGTRSQU4.ttf) format("truetype"),url(./media/Roboto-Black-OEOHVSYK.svg#Roboto) format("svg");font-weight:900;font-style:normal}@font-face{font-family:Roboto;src:url(./media/Roboto-BlackItalic-MXNS7VU5.eot);src:local("Roboto BlackItalic"),local("Roboto-BlackItalic"),url(./media/Roboto-BlackItalic-MXNS7VU5.eot?#iefix) format("embedded-opentype"),url(./media/Roboto-BlackItalic-6QYHVQZM.woff2) format("woff2"),url(./media/Roboto-BlackItalic-7QMDFEK5.woff) format("woff"),url(./media/Roboto-BlackItalic-XIXMO2HU.ttf) format("truetype"),url(./media/Roboto-BlackItalic-EYMGZCJW.svg#Roboto) format("svg");font-weight:900;font-style:italic}:root{--blue: #007bff;--indigo: #6610f2;--purple: #6f42c1;--pink: #e83e8c;--red: #dc3545;--orange: #fd7e14;--yellow: #ffc107;--green: #28a745;--teal: #20c997;--cyan: #17a2b8;--white: #fff;--gray: #6c757d;--gray-dark: #343a40;--primary: #007bff;--secondary: #6c757d;--success: #28a745;--info: #17a2b8;--warning: #ffc107;--danger: #dc3545;--light: #f8f9fa;--dark: #343a40;--breakpoint-xs: 0;--breakpoint-sm: 576px;--breakpoint-md: 768px;--breakpoint-lg: 992px;--breakpoint-xl: 1200px;--font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}*,*:before,*:after{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,Liberation Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}@media print{*,*:before,*:after{text-shadow:none!important;box-shadow:none!important}img{page-break-inside:avoid}@page{size:a3}body{min-width:992px!important}}body{color:#1e1e1e;font-family:"Roboto","Helvetica Neue",Helvetica,Arial sans-serif;font-size:16px;line-height:1.35em;font-weight:400;background:#F8F8F8}html{overflow-y:scroll}
</style><link rel="stylesheet" href="styles-P6UZRAYA.css" media="all" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-P6UZRAYA.css"></noscript><link rel="modulepreload" href="chunk-NIB5VS2P.js"><link rel="modulepreload" href="chunk-3H6CBPJ5.js"><link rel="modulepreload" href="chunk-BIU6NKKU.js"><link rel="modulepreload" href="chunk-D75ILFX5.js"><link rel="modulepreload" href="chunk-AZF33QNQ.js"><link rel="modulepreload" href="chunk-QBFS4BAK.js"><link rel="modulepreload" href="chunk-4R7QDBNQ.js"><meta property="og:title" content="Angular-Buch ‚Üí [Docker Serie 4/4] Multi-Stage Builds oder: Immer die Build-Umgebung dabei haben"><meta name="twitter:title" content="Angular-Buch ‚Üí [Docker Serie 4/4] Multi-Stage Builds oder: Immer die Build-Umgebung dabei haben"><meta name="description" content="üìô Multi-Stage Builds f√ºr Angular:
Wie Sie Apps gleich im Container bauen und trotzdem schlanke Docker-Images erstellen.
Vermeiden Sie Risiken durch externe Abh√§ngigkeiten!
Dies ist der letzte Teil unserer Artikelserie zu Angular und Docker."><meta property="og:description" content="üìô Multi-Stage Builds f√ºr Angular:
Wie Sie Apps gleich im Container bauen und trotzdem schlanke Docker-Images erstellen.
Vermeiden Sie Risiken durch externe Abh√§ngigkeiten!
Dies ist der letzte Teil unserer Artikelserie zu Angular und Docker."><meta name="twitter:description" content="üìô Multi-Stage Builds f√ºr Angular:
Wie Sie Apps gleich im Container bauen und trotzdem schlanke Docker-Images erstellen.
Vermeiden Sie Risiken durch externe Abh√§ngigkeiten!
Dies ist der letzte Teil unserer Artikelserie zu Angular und Docker."><meta name="twitter:site" content="@angular_buch"><meta property="og:locale" content="de"><meta property="og:type" content="website"><meta property="og:url" content="https://angular-buch.com/blog/2019-12-docker3-multi-stage-build"><style>.width-6{width:6.5rem}.width-8{width:8rem}.linkImage{margin-right:3px;margin-top:-3px}
</style><style>.content img{max-width:100%}.details-page-autor{margin-top:-110px}.details-thumbnail{margin-bottom:-18px}.details-thumbnail .details-thumbnail-inner{border-bottom:23px solid #dfdede;max-height:300px;overflow:hidden;background-color:#fff;border-radius:4px;display:flex;justify-content:center}.details-thumbnail .details-thumbnail-inner .darken-overlay{display:block;position:absolute;height:300px;width:100%;padding-left:15px;padding-right:15px;padding-bottom:23px}.details-thumbnail .details-thumbnail-inner .darken-overlay div{display:block;position:relative;width:100%;height:100%;background-color:#0003;border-radius:4px 4px 0 0/4px 4px 0px 0px}.details-thumbnail img{width:100%;align-self:center}.video-container{position:relative;padding-bottom:56.25%;padding-top:0;height:0;overflow:hidden;margin-top:2rem;margin-bottom:2rem}.video-container iframe,.video-container object,.video-container embed{position:absolute;top:0;left:0;width:100%;height:100%}
</style><meta property="og:image" content="https://website-articles.angular-buch.com/blog/2019-12-docker3-multi-stage-build/header3.jpg"><meta name="twitter:image" content="https://website-articles.angular-buch.com/blog/2019-12-docker3-multi-stage-build/header3.jpg"><meta name="twitter:card" content="summary_large_image"><script>window['ScullyIO']='generated';</script></head>
<body scully-version="0.0.0">
  <app-root ng-version="17.0.0-rc.3"><header><div class="nav__overlay"></div><div class="container"><div class="row no-gutters align-items-center"><div class="col-6 col-md-2"><a routerlink="/" aria-label="Startseite" href="/"><img src="assets/img/brand-400.png" alt="Angular-Buch.com" height="40" width="126" class="img-fluid"></a></div><div class="col-6 col-md-10"><nav><ul><li><app-link><!----><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/"><!----> Buch </a><!----><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/blog" class="nav__current" aria-current="page"><!----> Blog </a><!----><!----><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/material"><!----> Begleitmaterial </a><!----><!----><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/kaufen"><img alt="" class="linkImage ls-is-cached lazyloaded" data-src="assets/img/symbol-basket.svg" src="assets/img/symbol-basket.svg"><!----> Jetzt kaufen </a><!----><!----><!----><!----></app-link></li><li><app-link><!----><a class="order" href="//angular.schule/"><img alt="" class="linkImage ls-is-cached lazyloaded" data-src="assets/img/symbol-group.svg" src="assets/img/symbol-group.svg"><!----> Schulungen </a><!----><!----><!----><!----><!----></app-link></li><!----></ul></nav><a href="/" aria-label="Navigation" class="nav__toggle"><img src="assets/img/symbol-menu.svg" alt=""></a></div></div></div></header><main><router-outlet></router-outlet><app-blog-details><app-hero-header headline="Blog" headlinelink="/blog"><section class="hero hero--smaller"><div class="hero__lines"><div class="container"><div class="row justify-content-between"><div class="col-md-6 col-xs-12"><h1 class="headline__page headline__page--blank headline__page--space-bottom"><a style="color: white;" href="/blog">Blog</a><!----><!----></h1></div></div></div></div></section><a name="content" id="content"></a></app-hero-header><section class="index index--list blog mt-n5"><div class="index__stripe index__stripe--list"><!----><div class="container"><a name="post" id="post"></a><div class="row details-thumbnail"><div class="col-12"><div class="details-thumbnail-inner"><img alt="" class="img-fluid rounded lazyloaded" data-src="https://website-articles.angular-buch.com/blog/2019-12-docker3-multi-stage-build/header3.jpg" src="https://website-articles.angular-buch.com/blog/2019-12-docker3-multi-stage-build/header3.jpg"><!----></div></div><!----></div><div class="row"><div class="col-12"><div class="index__item index__item--list"><div class="row align-items-top"><div class="col-12 col-sm-3 col-md-2 text-center details-page-autor"><img alt="" class="blog__portrait img-fluid rounded-circle lazyloaded" data-src="//www.gravatar.com/avatar/4d89f498c1a638682a07b73648c0d3b5?size=200&amp;rating=pg&amp;d=mm" src="//www.gravatar.com/avatar/4d89f498c1a638682a07b73648c0d3b5?size=200&amp;rating=pg&amp;d=mm"><span class="blog__author">Michael Kaaden <br><a target="_blank" class="twitter" href="https://twitter.com/angular_schule"> @angular_schule</a> &nbsp; <!----><!----></span></div><div class="col-12 col-sm-9 col-md-10 col-lg-10"><h1 class="blog__headline">[Docker Serie 4/4] Multi-Stage Builds oder: Immer die Build-Umgebung dabei haben</h1><p class="blog__date">23.12.2019</p><p class="content markdown-body"><p><strong>Multi-Stage Builds f√ºr Angular:
Wie Sie Apps gleich im Container bauen und trotzdem schlanke Docker-Images erstellen.
Vermeiden Sie Risiken durch externe Abh√§ngigkeiten!
Dies ist der letzte Teil unserer Artikelserie zu Angular und Docker.</strong></p>
<p>Inhaltsverzeichnis:</p>
<ul>
<li><a href="/blog/2019-12-docker3-multi-stage-build#abhaengigkeiten">Interne und externe Abh√§ngigkeiten</a></li>
<li><a href="/blog/2019-12-docker3-multi-stage-build#externe-abhaengigkeiten-handhaben">Externe Abh√§ngigkeiten handhaben</a></li>
<li><a href="/blog/2019-12-docker3-multi-stage-build#docker-to-the-rescue">Docker To The Rescue</a></li>
<li><a href="/blog/2019-12-docker3-multi-stage-build#multi-stage-builds">Multi-Stage Builds</a></li>
<li><a href="/blog/2019-12-docker3-multi-stage-build#das-image-bauen">Das Image bauen</a></li>
<li><a href="#vergleich">Vergleich</a></li>
<li><a href="/blog/2019-12-docker3-multi-stage-build#grenzen-der-vorgestellten-loesung">Grenzen der vorgestellten L√∂sung</a></li>
<li><a href="/blog/2019-12-docker3-multi-stage-build#fazit">Fazit</a></li>
<li><a href="/blog/2019-12-docker3-multi-stage-build#rueckblick">R√ºckblick</a></li>
</ul>
<blockquote>
<p>Sie finden den Code zum Artikel auf
<a href="https://github.com/MichaelKaaden/dockerized-app/tree/master/Part-3-Multi-Stage-Build">GitHub</a>.</p>
</blockquote>
<p>In Teil I dieser Artikelserie haben Sie gelernt, wie Sie Ihre Angular-App in ein Docker-Image verpacken und in einem Container zur Ausf√ºhrung bringen k√∂nnen.</p>
<p>In Teil II haben wir uns damit besch√§ftigt, die Konfiguration der Angular-App mit Docker-Mitteln vorgeben zu k√∂nnen.</p>
<p>In diesem letzten Teil der Serie k√ºmmern wir uns darum, die Build-Umgebung deskriptiv in Ihr jeweiliges Projekt einzubinden und somit √ºber die Projektlaufzeit hinweg unter Ihrer Kontrolle zu halten.</p>
<hr>
<h2 id="interne-und-externe-abh√§ngigkeiten-">Interne und externe Abh√§ngigkeiten <a name="abhaengigkeiten"></a></h2>
<p>Kennen Sie das? Sie entwickeln ein Projekt nach allen Regeln der Ingenieurskunst durch, √ºbergeben es dem Betrieb oder dem Kunden ‚Äì und dann fassen Sie es nicht mehr an, bis sich jemand bei Ihnen meldet und nach √Ñnderungen verlangt.</p>
<p>Das ist dann der Moment, an dem Sie den Staub vom Projekt pusten und sich vielleicht als erstes fragen, wie Sie das damals gebaut haben.
Beschr√§nken wir uns auf TypeScript- oder JavaScript-Projekte, dann haben Sie vielleicht in der Sektion <code>scripts</code> in der <code>package.json</code> das entsprechende Kommando hinterlegt.
Vielleicht m√ºssen Sie auch ins <code>gulpfile.js</code> schauen.</p>
<p>Haben Sie sich besonnen und den Build angesto√üen, st√ºrzt Gulp unerwartet mit einer C++-Exception ab, und Sie fangen an, auf Google nach der Ursache zu suchen.
Sie stellen dann fest, dass es wohl daran liegt, dass Sie derzeit mit Node.js in Version 10 entwickeln, damals aber... Hm, war es Version 8 oder gar noch Version 6?
Und schon laden Sie beide Versionen herunter und probieren herum.
Schnell ist dann die erste Stunde investiert, ohne dass Sie produktiv gewesen w√§ren. Dabei ist Zeit doch Geld...</p>
<p>Was ist schiefgelaufen? Sie haben nicht beachtet, dass Sie es in Ihrem Projekt nicht nur mit <em>internen</em> Abh√§ngigkeiten zu tun haben, die Sie fein s√§uberlich in der <code>package.json</code> auff√ºhren, sondern auch mit <em>externen</em> Abh√§ngigkeiten, etwa der eingesetzten Node.js-Version.</p>
<h2 id="externe-abh√§ngigkeiten-handhaben-">Externe Abh√§ngigkeiten handhaben <a name="externe-abhaengigkeiten-handhaben"></a></h2>
<p>Nat√ºrlich gibt es L√∂sungen, um mehrere Versionen von Node.js gleichzeitig auf Ihrem Rechner vorzuhalten und zwischen diesen zu wechseln, etwa mit Tools wie <a href="https://github.com/tj/n">n</a> oder <a href="https://github.com/creationix/nvm">nvm</a>, aber das ist gar nicht mein Punkt. 
Der Punkt ist, dass Sie <em>daran denken</em> m√ºssen, jeweils auf die richtige Version umzustellen, wenn Sie zwischen Ihren Projekten wechseln.</p>
<p>Auf Ihrem Build-Server, etwa <a href="https://jenkins.io/">Jenkins</a> oder Gitlab CI, k√∂nnen Sie f√ºr jedes Projekt eine individuelle Umgebung vorgeben.
Projekt A baut dann mit Node.js in Version 10, w√§hrend das √§ltere Projekt B mit Node.js 6 erstellt wird.
Das ist eine tolle Sache, hilft Ihnen auf Ihrem Entwicklungsrechner aber nicht weiter.
Die Idee ist jedoch die Richtige: Wir m√ºssen die Build-Umgebung f√ºr das Projekt festlegen und einhalten, auch auf dem Entwicklungssystem.</p>
<h2 id="docker-to-the-rescue">Docker To The Rescue</h2>
<p>Warum bauen wir die App nicht einfach von einem Docker-Container aus? Dank des Containers h√§tten wir feingranulare Kontrolle √ºber die zu verwendende Node.js- und NPM-Version sowie das weitere Tooling, und all das k√∂nnten wir mittels eines Dockerfiles in unserem Projekt ablegen und zusammen mit dem Projekt versionieren.</p>
<p>Die Antwort ist ganz einfach: Das w√ºrde prima funktionieren, nur leider w√ºrde das dabei entstehende Image sehr gro√ü -- schlie√ülich sind alle Tools und das komplette <code>node_modules</code>-Verzeichnis Teil des Images, obwohl Sie diese nach dem erfolgreichen Build nicht mehr ben√∂tigen.
Alleine das Verzeichnis <code>node_modules</code> einer Angular-App ist schon fast 500 MB gro√ü.
Zusammen mit Google Chrome f√ºr die Unit Tests und Node.js sind Sie somit bei rund 1 GB pro Image.
Und Sie wissen ja: Uns reicht ein nginx-Image mit der Kopie des Verzeichnisses <code>dist/&lt;meine app&gt;</code>, das lediglich rund 100 MB gro√ü w√§re.</p>
<p>Damit ist unser Plan klar: Wir bauen die App trotzdem innerhalb eines Containers und erzeugen aus dem Ergebnis ein neues, minimales Image.
Zu unserem Gl√ºck ist das ein Problem, das nicht nur uns besch√§ftigt, sodass Docker eine L√∂sung f√ºr genau diesen
Anwendungsfall bietet: den sog. <em>Multi-Stage Build</em>.</p>
<h2 id="multi-stage-builds">Multi-Stage Builds</h2>
<p>Multi-Stage Builds kaskadieren den Build mehrerer Images und kopieren dabei Daten vom Vorg√§nger in den Nachfolger. 
Lediglich das letzte Image ist dabei das Ergebnis, die Vorg√§nger spielen keine Rolle mehr (werden aber gecachet, um den n√§chsten Build zu beschleunigen).
Letzten Endes k√∂nnen Sie sich das wie bei Prozessen und Pipes unter UNIX vorstellen: Die Ausgabe vom Vorg√§nger landet im Nachfolger.</p>
<p>In unserem Fall muss das erste Image die App bauen, w√§hrend das zweite die erzeugte App aufnimmt.
Daher muss das erste Image Node.js, NPM, Angular CLI und Google Chrome enthalten.
Das zweite Image ist identisch mit dem, das wir in den bisherigen Teilen der Artikelserie entwickelt haben.
Es bezieht die App aber aus dem ersten Image statt aus dem lokalen Verzeichnis <code>dist</code>.</p>
<p>Soviel zum Plan, nun setzen wir das Ganze um.
Als erstes m√ºssen wir unser <code>.dockerignore</code> bereinigen, denn nun legen wir sehr
wohl Wert auf alle Dateien und Verzeichnisse, die wir brauchen, um unsere App zu
erstellen. Andererseits ben√∂tigen wir jetzt das Verzeichnis <code>dist</code> nicht mehr, das zuvor noch essentiell f√ºr uns war, denn wir bauen die Anwendung ja nun nicht mehr lokal, sondern im Container.</p>
<pre><code><span class="hljs-selector-class">.editorconfig</span>
<span class="hljs-selector-class">.git</span>
<span class="hljs-selector-class">.gitignore</span>
<span class="hljs-selector-class">.idea</span>
README<span class="hljs-selector-class">.md</span>
coverage
dist
node_modules
</code></pre>
<p>Au√üerdem m√ºssen wir die Datei <code>src/karma.conf.js</code> anpassen, damit Google Chrome im Headless Mode in einem Container unter Debian GNU/Linux funktioniert.
F√ºgen Sie dazu im Abschnitt <code>config.set({...})</code> folgendes hinzu:</p>
<pre><code><span class="hljs-symbol">customLaunchers:</span> {
<span class="hljs-symbol">   ChromeHeadlessNoSandbox:</span> {
<span class="hljs-symbol">       base:</span> <span class="hljs-string">"ChromeHeadless"</span>,
<span class="hljs-symbol">       flags:</span> [<span class="hljs-string">"--no-sandbox"</span>],
   },
},
</code></pre>
<p>Hintergrund ist, dass wir das Sandboxing ausschalten m√ºssen, damit die Tests
ausgef√ºhrt werden.
Da Sie selbst den Container unter Kontrolle haben, sollte dieses Risiko akzeptabel sein.</p>
<p>Als N√§chstes m√ºssen wir unser <code>Dockerfile</code> erweitern:</p>
<pre><code class="language-dockerfile">FROM node:<span class="hljs-number">10</span>-buster as node

RUN npm install -g @angular/cli@<span class="hljs-number">7.3</span>.<span class="hljs-number">5</span>

<span class="hljs-comment"># install Google Chrome</span>
RUN wget -q -O - https:<span class="hljs-regexp">//</span>dl-ssl.google.com<span class="hljs-regexp">/linux/</span>linux_signing_key.pub | apt-key add - \
    &amp;&amp; sh -c <span class="hljs-string">'echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" &gt;&gt; /etc/apt/sources.list.d/google.list'</span> \
    &amp;&amp; apt-get update &amp;&amp; apt-get install -yq google-chrome-stable

<span class="hljs-comment"># now test and build the app</span>
WORKDIR <span class="hljs-regexp">/usr/</span>src/app
COPY . ./
RUN yarn install
<span class="hljs-comment"># ChromeHeadless needs to be run with --no-sandbox</span>
RUN ng test --watch=false --browsers=ChromeHeadlessNoSandbox &amp;&amp; ng build --prod

<span class="hljs-comment"># Stage 2</span>
FROM nginx

LABEL maintainer=<span class="hljs-string">"Ihr Name &lt;you@your.domain&gt;"</span>

COPY nginx<span class="hljs-regexp">/default.conf /</span>etc<span class="hljs-regexp">/nginx/</span>conf.d
COPY --from=node <span class="hljs-regexp">/usr/</span>src<span class="hljs-regexp">/app/</span>dist<span class="hljs-regexp">/dockerized-app /u</span>sr<span class="hljs-regexp">/share/</span>nginx/html
</code></pre>
<p>Eine kurze Erkl√§rung dazu: Dieses Dockerfile basiert auf einem Image mit Node.js 10 und legt darin <code>@angular/cli</code> in Version 7.3.5 (passend zur Version in der <code>package.json</code>-Datei) und den Chrome-Browser ab. 
Anschlie√üend baut es die App, genau so, wie wir es bisher von Hand getan haben -- na, nicht ganz, wir lassen nun die Tests laufen, denn das geh√∂rt doch sicher auch bei Ihnen dazu, nicht wahr?
Ansonsten kommentieren Sie die Zeile mit <code>RUN ng test ...</code> einfach aus.
Im zweiten Schritt (gekennzeichnet durch den Kommentar "Stage 2") kopiert es die fertiggestellte App aus dem ersten Image in das zweite.</p>
<p>Die entscheidenden Stellen sind <code>FROM node:10-buster as node</code>, die die Bezeichnung <code>node</code> f√ºr das erste Image vorgibt, und <code>COPY --from=node ...</code>, die unter Verwendung dieser Bezeichnung aus dem ersten in das zweite Image kopiert.</p>
<p>Jetzt entfernen wir noch den Build der App aus dem Skript <code>dockerize.sh</code>, da sich das <code>Dockerfile</code> ab jetzt um diesen Schritt k√ºmmert:</p>
<pre><code class="language-bash"><span class="hljs-meta">#!/bin/bash</span>
docker build -t dockerized-app .
</code></pre>
<h2 id="das-image-bauen">Das Image bauen</h2>
<p>Um das Image mit der App zu bauen, gehen wir genauso vor wie bisher: Wir f√ºhren erst <code>dockerize.sh</code> aus und dann <code>redeploy.sh</code>. Hier ein Beispiellauf:</p>
<pre><code class="language-console">$ <span class="hljs-string">./dockerize.sh</span>
Sending build context to Docker daemon  370.7kB
Step 1/11 : FROM node<span class="hljs-function">:10-buster</span> as node
 <span class="hljs-params">---</span>&gt; d71f0dc8e93b
Step 2/11 : RUN npm install -g @angular/cli@7.3.5
 <span class="hljs-params">---</span>&gt; Running in 0ddecfd06f16
+ @angular/cli@7.3.5
added 289 packages from 181 contributors in 9.717s
Removing intermediate container 0ddecfd06f16
 <span class="hljs-params">---</span>&gt; fd9b8afe37ec
Step 3/11 : RUN wget -q -O - https:<span class="hljs-string">//dl-ssl.google.com/linux/linux_signing_key.pub</span> | apt-key add -     &amp;&amp; sh -c '<span class="hljs-keyword">echo</span> <span class="hljs-string">"deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main"</span> &gt;&gt; <span class="hljs-string">/etc/apt/sources.list.d/google.list</span>'     &amp;&amp; apt-get update &amp;&amp; apt-get install -yq google-chrome-stable
 <span class="hljs-params">---</span>&gt; Running in f85a552bb159
Get<span class="hljs-function">:1</span> http:<span class="hljs-string">//deb.debian.org/debian</span> buster InRelease [122 kB]
<span class="hljs-string">...</span>
Fetched 8230 kB in 2s <span class="hljs-params">(5416 kB/s)</span>
Reading package lists.<span class="hljs-string">..</span>
Reading package lists.<span class="hljs-string">..</span>
Building dependency tree.<span class="hljs-string">..</span>
Reading state information.<span class="hljs-string">..</span>
The following additional packages will be installed:
  adwaita-icon-theme at-spi2-core dbus dbus-user-session
  <span class="hljs-string">...</span>
Setting up google-chrome-stable <span class="hljs-params">(78.0.3904.97-1)</span> <span class="hljs-string">...</span>
Removing intermediate container f85a552bb159
 <span class="hljs-params">---</span>&gt; 92e5bb2bbaed
Step 4/11 : WORKDIR <span class="hljs-string">/usr/src/app</span>
 <span class="hljs-params">---</span>&gt; Running in 86a7a6c9204f
Removing intermediate container 86a7a6c9204f
 <span class="hljs-params">---</span>&gt; 0c06bb302e39
Step 5/11 : COPY . <span class="hljs-string">./</span>
 <span class="hljs-params">---</span>&gt; 9d6b58feea14
Step 6/11 : RUN yarn
 <span class="hljs-params">---</span>&gt; Running in a35c44a28667
yarn install v1.19.1
[1/4] Resolving packages.<span class="hljs-string">..</span>
[2/4] Fetching packages.<span class="hljs-string">..</span>
[3/4] Linking dependencies.<span class="hljs-string">..</span>
[4/4] Building fresh packages.<span class="hljs-string">..</span>
Done in 17.33s.
Removing intermediate container a35c44a28667
 <span class="hljs-params">---</span>&gt; 5959d3240af1
Step 7/11 : RUN ng test <span class="hljs-params">--watch=false</span> <span class="hljs-params">--browsers=ChromeHeadlessNoSandbox</span> &amp;&amp; ng build <span class="hljs-params">--prod</span>
 <span class="hljs-params">---</span>&gt; Running in e8e73909da63
11 11 2019 17<span class="hljs-function">:51</span><span class="hljs-function">:51.637</span><span class="hljs-function">:INFO</span> [karma-server]: Karma v4.0.1 server started at http:<span class="hljs-string">//0.0.0.0</span><span class="hljs-function">:9876</span>/
11 11 2019 17<span class="hljs-function">:51</span><span class="hljs-function">:51.638</span><span class="hljs-function">:INFO</span> [launcher]: Launching browsers ChromeHeadlessNoSandbox with concurrency unlimited
11 11 2019 17<span class="hljs-function">:51</span><span class="hljs-function">:51.640</span><span class="hljs-function">:INFO</span> [launcher]: Starting browser ChromeHeadless
11 11 2019 17<span class="hljs-function">:51</span><span class="hljs-function">:53.962</span><span class="hljs-function">:INFO</span> [HeadlessChrome 78.0.3904 <span class="hljs-params">(Linux 0.0.0)</span>]: Connected on socket x67ZoJs6ERhBn45OAAAA with id 98052412
TOTAL: 9 SUCCESS
TOTAL: 9 SUCCESS

Date: 2019-11-11T17<span class="hljs-function">:52</span><span class="hljs-function">:15.005Z</span>
Hash: 046f0c97454b9144a096
Time: 17593ms
chunk {0} runtime.a5dd35324ddfd942bef1.js <span class="hljs-params">(runtime)</span> 1.41 kB [entry] [rendered]
chunk {1} es2015-polyfills.4a4cfea0ce682043f4e9.js <span class="hljs-params">(es2015-polyfills)</span> 56.4 kB [initial] [rendered]
chunk {2} main.0c51b538c84777d5bf5e.js <span class="hljs-params">(main)</span> 262 kB [initial] [rendered]
chunk {3} polyfills.9f3702a215d30daac9b6.js <span class="hljs-params">(polyfills)</span> 41 kB [initial] [rendered]
chunk {4} styles.3ff695c00d717f2d2a11.css <span class="hljs-params">(styles)</span> 0 bytes [initial] [rendered]
Removing intermediate container e8e73909da63
 <span class="hljs-params">---</span>&gt; 3a3d2d063b02
Step 8/11 : FROM nginx
 <span class="hljs-params">---</span>&gt; 53f3fd8007f7
Step 9/11 : LABEL maintainer=<span class="hljs-string">"Michael Kaaden &lt;github@kaaden.net&gt;"</span>
 <span class="hljs-params">---</span>&gt; Using cache
 <span class="hljs-params">---</span>&gt; 974a15c23b4f
Step 10/11 : COPY nginx/default.conf <span class="hljs-string">/etc/nginx/conf.d</span>
 <span class="hljs-params">---</span>&gt; Using cache
 <span class="hljs-params">---</span>&gt; cb36b6c88fbc
Step 11/11 : COPY <span class="hljs-params">--from=node</span> <span class="hljs-string">/usr/src/app/dist/dockerized-app</span> <span class="hljs-string">/usr/share/nginx/html</span>
 <span class="hljs-params">---</span>&gt; Using cache
 <span class="hljs-params">---</span>&gt; 005ab4ca56a3
Successfully built 005ab4ca56a3
Successfully tagged dockerized-app-multistage<span class="hljs-function">:latest</span>
</code></pre>
<p>Wenn Sie das Meldungspaar "Successfully built .../Successfully tagged ..." sehen, haben Sie es geschafft: Der Multi-Stage Build hat geklappt.
F√ºhren Sie Ihren Container nun aus:</p>
<pre><code class="language-console">$ ./redeploy.sh
Removing<span class="hljs-built_in"> network </span>dockerized-app_default
WARNING:<span class="hljs-built_in"> Network </span>dockerized-app_default <span class="hljs-keyword">not</span> found.
Creating<span class="hljs-built_in"> network </span><span class="hljs-string">"dockerized-app_default"</span> with the<span class="hljs-built_in"> default </span>driver
Creating dockerized-app_web_1 <span class="hljs-built_in">..</span>. done
</code></pre>
<p>Der so erzeugte Container sollte nun genauso funktionieren wie der aus dem vorigen Teil dieser Artikelserie.
Die Verbesserung besteht jetzt darin, dass Sie alles, was Sie zum Build ben√∂tigen, in Ihrem Projekt beschreiben und das in Ihrer Quellcodeverwaltung mit versionieren k√∂nnen.
Sie haben dadurch keinen Performance-Nachteil, da Docker den ersten Stage cachet ‚Äì lediglich der zweite Stage muss jedes Mal erstellt werden, wenn Sie etwas an Ihrer App √§ndern.</p>
<h2 id="vergleich">Vergleich</h2>
<p>Hier ein Gr√∂√üenvergleich der Images, die wir in jedem der drei Teile der
Artikelserie erstellt haben.</p>
<pre><code>|<span class="hljs-string"> REPOSITORY                </span>|<span class="hljs-string"> TAG    </span>|<span class="hljs-string"> IMAGE ID     </span>|<span class="hljs-string"> CREATED            </span>|<span class="hljs-string"> SIZE  </span>|
|<span class="hljs-string"> ------------------------- </span>|<span class="hljs-string"> ------ </span>|<span class="hljs-string"> ------------ </span>|<span class="hljs-string"> ------------------ </span>|<span class="hljs-string"> ----- </span>|
|<span class="hljs-string"> dockerized-app-simple     </span>|<span class="hljs-string"> latest </span>|<span class="hljs-string"> a90b35651f39 </span>|<span class="hljs-string"> 18 minutes ago     </span>|<span class="hljs-string"> 110MB </span>|
|<span class="hljs-string"> dockerized-app-env        </span>|<span class="hljs-string"> latest </span>|<span class="hljs-string"> 709da311ce4b </span>|<span class="hljs-string"> 17 minutes ago     </span>|<span class="hljs-string"> 110MB </span>|
|<span class="hljs-string"> dockerized-app-multistage </span>|<span class="hljs-string"> latest </span>|<span class="hljs-string"> 3ecfc4231dd5 </span>|<span class="hljs-string"> About a minute ago </span>|<span class="hljs-string"> 110MB </span>|
</code></pre>
<p>Wie Sie sehen, gibt es keinen sp√ºrbaren Unterschied zwischen den Image-Gr√∂√üen.
Das ist nat√ºrlich kein Zufall: In den ersten beiden Teilen haben wir die App von Hand gebaut und das Verzeichnis <code>dist/dockerized-app</code> in das Image kopiert.
In diesem Teil der Artikelserie haben wir den Build in ein Image im ersten Stage verlagert und von dort aus kopiert.
Es war also zu erwarten, dass sich die Gr√∂√üe des finalen Images nicht √§ndert.</p>
<p>Spa√üeshalber habe ich die Gr√∂√üe des ersten Stage des Multi-Stage Builds gemessen:</p>
<pre><code>|<span class="hljs-string"> REPOSITORY </span>|<span class="hljs-string"> TAG    </span>|<span class="hljs-string"> IMAGE ID     </span>|<span class="hljs-string"> CREATED        </span>|<span class="hljs-string"> SIZE  </span>|
|<span class="hljs-string"> ---------- </span>|<span class="hljs-string"> ------ </span>|<span class="hljs-string"> ------------ </span>|<span class="hljs-string"> -------------- </span>|<span class="hljs-string"> ----- </span>|
|<span class="hljs-string"> stage1     </span>|<span class="hljs-string"> latest </span>|<span class="hljs-string"> 19e76e412adc </span>|<span class="hljs-string"> 25 seconds ago </span>|<span class="hljs-string"> 989MB </span>|
</code></pre>
<p>1 GB ist eine stolze Gr√∂√üe. Das Image existiert allerdings nur auf dem Buildsystem und nicht auf dem Produktivserver.
W√ºrden wir unsere App mit diesem Image betreiben, h√§tten wir den zehnfachen Speicherbedarf...</p>
<h2 id="grenzen-der-vorgestellten-l√∂sung-">Grenzen der vorgestellten L√∂sung <a name="grenzen-der-vorgestellten-loesung"></a></h2>
<p>Mit der vorgestellten L√∂sung k√∂nnen wir unsere App jederzeit mit den von uns festgelegten NPM-Paketen bauen, zumindest unter der Annahme, dass diese Pakete auch in Zukunft noch verf√ºgbar sind. Die NPM Registry vergisst nichts, insofern bin ich da √§u√üerst zuversichtlich.</p>
<p>Mittelfristig ver√§ndern sich die Images nat√ºrlich, die die Basis der L√∂sung darstellen.
Node 10 wird in neueren Versionen vorliegen, das Debian 10-Image wird ebenfalls mit Updates versorgt.
Unsere App wird davon weitestgehend unbeeinflusst bleiben.
Allerdings ben√∂tigen einige NPM-Pakete wie <code>node-gyp</code> beispielsweise sowohl den installierten Python-Interpreter als auch den C++-Compiler.
Das kann im Einzelfall zu der einen oder anderen √Ñnderungen in der von <code>ng build</code> erzeugten App f√ºhren, was meist nicht auffallen wird, weil Sie sowieso das eine oder andere Sicherheitsupdate f√ºr von Ihnen verwendete NPM-Pakete einpflegen m√ºssen.</p>
<p>Betrachten wir einen Zeitraum von zehn Jahren, sieht die Situation schon weniger rosig aus, weil es dann evtl. gar kein Node 10-Image mehr gibt...</p>
<p>Damit sollte klar sein, dass die vorgestellte L√∂sung keine Art von Langzeit-Archivierung der Build-Umgebung bieten kann, weil kein Langzeit-Archiv der Abh√§ngigkeiten wie der Basis-Images existiert.
Falls dennoch genau das f√ºr Ihren Auftraggeber wichtig sein sollte, dann hat er das Problem typischerweise schon selbst f√ºr seine eigene Software im Griff, so dass Sie auf dessen Probleml√∂sung zur Archivierung der Build-Umgebung zur√ºckgreifen k√∂nnen (und sollten).
Falls Sie sich selber darum k√ºmmern m√ºssten, m√ºssen Sie letztendlich auf irgendeine Art f√ºr die Langzeitarchivierung der Abh√§ngigkeiten aus obigem <code>Dockerfile</code> sorgen.</p>
<p>Sie sehen, zumindest kurz- und mittelfristig brauchen Sie sich keine ernsthaften Gedanken um Ihre Build-Umgebung zu machen.
Langfristig sieht das allerdings anders aus.</p>
<h2 id="fazit">Fazit</h2>
<p>Welche Methode sollten Sie also f√ºr Ihren Anwendungsfall w√§hlen? Die Entscheidung ist meiner Meinung nach anhand der genannten Kriterien einfach zu treffen: 
Wenn Sie mit den <code>environment.ts</code>-Dateien auskommen, bleiben Sie bei der L√∂sung aus Teil I, um Ihre App in einen Container zu packen.
M√∂chten Sie die App in mehreren Umgebungen betreiben und deswegen die Konfiguration √§ndern, landen Sie automatisch bei der L√∂sung aus Teil II.
Und wenn es Ihnen wichtig ist, Ihre Build-Umgebung im Griff zu haben, verwenden Sie den Multi-Stage Build aus diesem Artikel, die Sie mit jeder der beiden zuvor genannten Methoden kombinieren k√∂nnen.</p>
<p>Wie auch immer Sie sich entscheiden: Sie werden schnell merken, wie angenehm es ist, Ihre App mit Docker zum Laufen zu bringen.</p>
<p>Und falls Sie sich doch einmal daf√ºr entscheiden, einen Build Server wie Jenkins zu installieren und passend einzurichten, beschr√§nkt sich Ihre finale T√§tigkeit in jedem Projekt auf ein <code>git push</code>, woraufhin der Build Server die neueste Version Ihres Projekts auscheckt, den Multi-Stage Build ausl√∂st und das Ergebnis
auf dem Zielsystem zum Laufen bringt.</p>
<p>Somit k√∂nnen Sie sich in Zukunft auf Ihre Kernkompetenzen beschr√§nken und das tun, was Ihnen Spa√ü macht. Software entwickeln.
Um den Build und das Deployment k√ºmmern sich Ihre Automatismen, die dank Docker unkompliziert einzurichten sind.</p>
<h2 id="r√ºckblick-">R√ºckblick <a name="rueckblick"></a></h2>
<p>Die Artikelserie besteht aus den folgenden Teilen:</p>
<ol>
<li><a href="https://angular-buch.com/blog/2019-12-docker0-intro">Angular-Apps und Docker: Einleitung</a></li>
<li><a href="https://angular-buch.com/blog/2019-12-docker1-simple-case">Angular-App √ºber Docker bereitstellen</a></li>
<li><a href="https://angular-buch.com/blog/2019-12-docker2-build-once-run-anywhere">Build Once, Run Anywhere oder: Konfiguration √ºber Docker verwalten</a></li>
<li><a href="https://angular-buch.com/blog/2019-12-docker3-multi-stage-build">Multi-Stage Builds oder: Immer die Build-Umgebung dabei haben</a> <strong>(der aktuelle Artikel)</strong></li>
</ol>
<br>
<hr>

<p><small><strong>Titelbild:</strong> Bild von <a href="https://unsplash.com/@chuttersnap">chuttersnap</a> auf <a href="https://unsplash.com">Unsplash</a>, bearbeitet</small></p>
</p><!----><!----><a routerlink="/blog" ripple-radius="" class="btn btn-sm btn-primary mt-4" href="/blog"><i class="fa fa-backward mr-2"></i> Zur√ºck</a><hr> Suggestions? Feedback? Bugs? Please <a target="_blank" class="content" href="https://github.com/angular-buch/website-articles/blob/gh-pages/blog/2019-12-docker3-multi-stage-build/README.md"><i class="fa fa-github mr-1" style="font-size: 1.6rem; position: relative; bottom: -3px;"></i>fork/edit this page on Github</a>. </div></div></div></div></div><div class="row" style="margin-top: -20px;"><div class="col-12"><div class="index__item index__item--list"><div class="row align-items-top"><div class="col-12 col-sm-3 col-md-2 text-center"><img alt="" class="blog__portrait img-fluid rounded-circle lazyload" data-src="//www.gravatar.com/avatar/4d89f498c1a638682a07b73648c0d3b5?size=200&amp;rating=pg&amp;d=mm" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><span class="blog__author">Michael Kaaden <br><a target="_blank" class="twitter" href="https://twitter.com/angular_schule"> @angular_schule</a> &nbsp; <!----><!----></span></div><div class="col-12 col-sm-9 col-md-10 col-lg-10"><h2>√úber den Autor</h2><p class="content"> Michael Kaaden ist als Software-Architekt und Manager f√ºr ein mittelst√§ndisches Unternehmen in N√ºrnberg t√§tig. Dort ist er f√ºr die technische Seite einer Cloud-Produktline verantwortlich. In dieser Eigenschaft k√ºmmert er sich trotz seiner grunds√§tzlichen Affinit√§t zu Angular nicht nur um Frontends, sondern neben der Gesamtarchitektur unter anderem auch um APIs, Backends, Datenbanken sowie Software-Entwicklungs- und Build-Prozesse. Wenn er in seiner Freizeit nicht gerade mit seiner Familie unterwegs ist, Full-Stack Developer spielt oder seine Nase in neue Technologien steckt, versucht er, seinen Laufstil zu verbessern und endlich den f√ºr ihn perfekten Fotoapparat zu finden. </p></div></div></div></div></div><!----></div><!----></div></section><app-json-ld><script type="application/ld+json">{
  "url": "https://angular.schule/blog/2019-12-docker3-multi-stage-build",
  "headline": "[Docker Serie 4/4] Multi-Stage Builds oder: Immer die Build-Umgebung dabei haben",
  "description": "Multi-Stage Builds f√ºr Angular:\nWie Sie Apps gleich im Container bauen und trotzdem schlanke Docker-Images erstellen.\nVermeiden Sie Risiken durch externe Abh√§ngigkeiten!\nDies ist der letzte Teil unserer Artikelserie zu Angular und Docker.",
  "datePublished": "2019-12-23",
  "dateModified": "2019-12-23",
  "publisher": {
    "name": "Angular-Buch",
    "url": "https://angular-buch.com",
    "@type": "Organization",
    "logo": {
      "@type": "ImageObject",
      "url": "https://angular-buch.com/assets/img/brand_export.png"
    }
  },
  "image": "https://website-articles.angular-buch.com/blog/2019-12-docker3-multi-stage-build/header3.jpg",
  "thumbnailUrl": "https://website-articles.angular-buch.com/blog/2019-12-docker3-multi-stage-build/header3.jpg",
  "author": {
    "@type": "Person",
    "name": "Michael Kaaden",
    "email": "blog@kaaden.net"
  },
  "keywords": [
    "Docker",
    "Multi-Stage Builds"
  ],
  "mainEntityOfPage": "http://schema.org/WebPage",
  "@type": "Article",
  "@context": "http://schema.org"
}</script></app-json-ld></app-blog-details><!----><footer><div class="container"><div class="row align-items-center"><div class="col-sm-9"><div class="links"><app-link><!----><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/"><!----> Home </a><!----><!----><!----></app-link>|<!----><!----><!----><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/impressum"><!----> Impressum </a><!----><!----><!----><!----></app-link>|<!----><!----><!----><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/datenschutz"><!----> Datenschutzerkl√§rung </a><!----><!----><!----><!----></app-link>|<!----><!----><!----><app-link><!----><a class="links__item links__twitter" href="https://twitter.com/angular_buch" rel="nofollow"><!----> Twitter </a><!----><!----><!----><!----><!----></app-link><!----><!----><!----></div></div><div class="col-sm-3 text-right"></div></div></div></footer></main><app-json-ld><script type="application/ld+json"></script></app-json-ld></app-root>
<script src="polyfills-LZBJRJJE.js" type="module"></script><script src="main-YI7NJDHW.js" type="module"></script>

</body></html>