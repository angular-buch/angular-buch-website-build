<!DOCTYPE html><html lang="de" data-critters-container=""><head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#"><meta name="generator" content="Scully 0.0.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <title>Angular-Buch → [Docker Serie 2/4] Angular-App über Docker bereitstellen</title>
  

  

  <meta property="book:author" content="https://www.facebook.com/ferdinand.malcher">
  <meta property="book:author" content="https://www.facebook.com/johannes.hoppe">

  <meta property="book:isbn" content="9783864909467">
  <meta property="book:release_date" content="2023-02-28">
  <meta property="book:tag" content="Angular">
  <meta property="book:tag" content="Webentwicklung">
  <meta property="book:tag" content="AngularJS">
  <meta property="book:tag" content="TypeScript">
  <meta property="book:tag" content="JavaScript">
  <meta property="book:tag" content="HTML5">
  <meta property="book:tag" content="CSS">
  <meta property="book:tag" content="RxJS">
  <meta property="book:tag" content="Redux">
  <meta property="book:tag" content="NgRx">

  <base href="/">
<style>@charset "UTF-8";@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@font-face{font-family:Roboto;src:url("./media/Roboto-Thin-GAS35NAQ.eot");src:local("Roboto Thin"),local("Roboto-Thin"),url("./media/Roboto-Thin-GAS35NAQ.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Thin-UUU7IP4L.woff2") format("woff2"),url("./media/Roboto-Thin-BT5WDCMC.woff") format("woff"),url("./media/Roboto-Thin-STLHGJGZ.ttf") format("truetype"),url("./media/Roboto-Thin-OYOYLS5N.svg#Roboto") format("svg");font-weight:100;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-ThinItalic-HQCJJ3KQ.eot");src:local("Roboto ThinItalic"),local("Roboto-ThinItalic"),url("./media/Roboto-ThinItalic-HQCJJ3KQ.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-ThinItalic-PVCCLVHZ.woff2") format("woff2"),url("./media/Roboto-ThinItalic-OJCFQICS.woff") format("woff"),url("./media/Roboto-ThinItalic-OKVQEY6M.ttf") format("truetype"),url("./media/Roboto-ThinItalic-PU7U6F54.svg#Roboto") format("svg");font-weight:100;font-style:italic}@font-face{font-family:Roboto;src:url("./media/Roboto-Light-TT7V6J7W.eot");src:local("Roboto Light"),local("Roboto-Light"),url("./media/Roboto-Light-TT7V6J7W.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Light-OEL5QP53.woff2") format("woff2"),url("./media/Roboto-Light-EGEOUPZ7.woff") format("woff"),url("./media/Roboto-Light-KYCYMX5R.ttf") format("truetype"),url("./media/Roboto-Light-O5NB3DZS.svg#Roboto") format("svg");font-weight:300;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-LightItalic-JJ225GLJ.eot");src:local("Roboto LightItalic"),local("Roboto-LightItalic"),url("./media/Roboto-LightItalic-JJ225GLJ.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-LightItalic-SZU3UOEY.woff2") format("woff2"),url("./media/Roboto-LightItalic-5LJGTDBY.woff") format("woff"),url("./media/Roboto-LightItalic-ZTOFFLND.ttf") format("truetype"),url("./media/Roboto-LightItalic-FE5GYQJO.svg#Roboto") format("svg");font-weight:300;font-style:italic}@font-face{font-family:Roboto;src:url("./media/Roboto-Regular-WINA5356.eot");src:local("Roboto Regular"),local("Roboto-Regular"),url("./media/Roboto-Regular-WINA5356.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Regular-4ZFX4XNS.woff2") format("woff2"),url("./media/Roboto-Regular-EMJ7NDAQ.woff") format("woff"),url("./media/Roboto-Regular-W6LM4ZNI.ttf") format("truetype"),url("./media/Roboto-Regular-DDBAS5OS.svg#Roboto") format("svg");font-weight:400;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-RegularItalic-43QNLNAN.eot");src:local("Roboto RegularItalic"),local("Roboto-RegularItalic"),url("./media/Roboto-RegularItalic-43QNLNAN.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-RegularItalic-2REFJECD.woff2") format("woff2"),url("./media/Roboto-RegularItalic-NSJ4HBKT.woff") format("woff"),url("./media/Roboto-RegularItalic-YZDJVEXU.ttf") format("truetype"),url("./media/Roboto-RegularItalic-7A3VJZ2J.svg#Roboto") format("svg");font-weight:400;font-style:italic}@font-face{font-family:Roboto;src:url("./media/Roboto-Medium-TKOJIIN4.eot");src:local("Roboto Medium"),local("Roboto-Medium"),url("./media/Roboto-Medium-TKOJIIN4.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Medium-GHCC3HN6.woff2") format("woff2"),url("./media/Roboto-Medium-O2PKKQNT.woff") format("woff"),url("./media/Roboto-Medium-ANIBKV6W.ttf") format("truetype"),url("./media/Roboto-Medium-RJM2M5RS.svg#Roboto") format("svg");font-weight:500;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-MediumItalic-5WUL7G7J.eot");src:local("Roboto MediumItalic"),local("Roboto-MediumItalic"),url("./media/Roboto-MediumItalic-5WUL7G7J.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-MediumItalic-FMJUHMWQ.woff2") format("woff2"),url("./media/Roboto-MediumItalic-EJXCUUAA.woff") format("woff"),url("./media/Roboto-MediumItalic-ZZ274MH6.ttf") format("truetype"),url("./media/Roboto-MediumItalic-WUJRBJ2B.svg#Roboto") format("svg");font-weight:500;font-style:italic}@font-face{font-family:Roboto;src:url("./media/Roboto-Bold-BUUHB5PB.eot");src:local("Roboto Bold"),local("Roboto-Bold"),url("./media/Roboto-Bold-BUUHB5PB.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Bold-NGAPMV26.woff2") format("woff2"),url("./media/Roboto-Bold-GE6V3ZS2.woff") format("woff"),url("./media/Roboto-Bold-5VUU6QI6.ttf") format("truetype"),url("./media/Roboto-Bold-UXMYHWKZ.svg#Roboto") format("svg");font-weight:700;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-BoldItalic-ETKPZE3Z.eot");src:local("Roboto BoldItalic"),local("Roboto-BoldItalic"),url("./media/Roboto-BoldItalic-ETKPZE3Z.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-BoldItalic-TBVJ3OTX.woff2") format("woff2"),url("./media/Roboto-BoldItalic-2CYTLDZJ.woff") format("woff"),url("./media/Roboto-BoldItalic-4MMIXUDR.ttf") format("truetype"),url("./media/Roboto-BoldItalic-TDTZWBKI.svg#Roboto") format("svg");font-weight:700;font-style:italic}@font-face{font-family:Roboto;src:url("./media/Roboto-Black-FJBQ2JLX.eot");src:local("Roboto Black"),local("Roboto-Black"),url("./media/Roboto-Black-FJBQ2JLX.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-Black-OEG2WEQ3.woff2") format("woff2"),url("./media/Roboto-Black-AZ2AXCB4.woff") format("woff"),url("./media/Roboto-Black-IGTRSQU4.ttf") format("truetype"),url("./media/Roboto-Black-OEOHVSYK.svg#Roboto") format("svg");font-weight:900;font-style:normal}@font-face{font-family:Roboto;src:url("./media/Roboto-BlackItalic-MXNS7VU5.eot");src:local("Roboto BlackItalic"),local("Roboto-BlackItalic"),url("./media/Roboto-BlackItalic-MXNS7VU5.eot?#iefix") format("embedded-opentype"),url("./media/Roboto-BlackItalic-6QYHVQZM.woff2") format("woff2"),url("./media/Roboto-BlackItalic-7QMDFEK5.woff") format("woff"),url("./media/Roboto-BlackItalic-XIXMO2HU.ttf") format("truetype"),url("./media/Roboto-BlackItalic-EYMGZCJW.svg#Roboto") format("svg");font-weight:900;font-style:italic}:root{--blue: #007bff;--indigo: #6610f2;--purple: #6f42c1;--pink: #e83e8c;--red: #dc3545;--orange: #fd7e14;--yellow: #ffc107;--green: #28a745;--teal: #20c997;--cyan: #17a2b8;--white: #fff;--gray: #6c757d;--gray-dark: #343a40;--primary: #007bff;--secondary: #6c757d;--success: #28a745;--info: #17a2b8;--warning: #ffc107;--danger: #dc3545;--light: #f8f9fa;--dark: #343a40;--breakpoint-xs: 0;--breakpoint-sm: 576px;--breakpoint-md: 768px;--breakpoint-lg: 992px;--breakpoint-xl: 1200px;--font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}*,*:before,*:after{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,Liberation Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}@media print{*,*:before,*:after{text-shadow:none!important;box-shadow:none!important}img{page-break-inside:avoid}@page{size:a3}body{min-width:992px!important}}body{color:#1e1e1e;font-family:"Roboto","Helvetica Neue",Helvetica,Arial sans-serif;font-size:16px;line-height:1.35em;font-weight:400;background:#f8f8f8}html{overflow-y:scroll}
</style><link rel="stylesheet" href="styles-24WBZHAI.css" media="all" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-24WBZHAI.css"></noscript><link rel="modulepreload" href="chunk-NATMASFH.js"><link rel="modulepreload" href="chunk-GG7MI7Z3.js"><link rel="modulepreload" href="chunk-7AOEDJ7X.js"><link rel="modulepreload" href="chunk-WXI33M2S.js"><link rel="modulepreload" href="chunk-FOH2WTW5.js"><link rel="modulepreload" href="chunk-DWFE37FD.js"><link rel="modulepreload" href="chunk-UCVTEUC6.js"><meta property="og:title" content="Angular-Buch → [Docker Serie 2/4] Angular-App über Docker bereitstellen"><meta name="twitter:title" content="Angular-Buch → [Docker Serie 2/4] Angular-App über Docker bereitstellen"><meta name="description" content="📙 First Steps:
Wie Sie Ihre Angular-App in ein Docker-Image packen und als Container zur Ausführung bringen.
Vergessen Sie Ihre Sorgen über den korrekten Build und das richtige Deployment!
Dies ist der 2. Teil unserer vierteiligen Artikelserie zu Angular und Docker."><meta property="og:description" content="📙 First Steps:
Wie Sie Ihre Angular-App in ein Docker-Image packen und als Container zur Ausführung bringen.
Vergessen Sie Ihre Sorgen über den korrekten Build und das richtige Deployment!
Dies ist der 2. Teil unserer vierteiligen Artikelserie zu Angular und Docker."><meta name="twitter:description" content="📙 First Steps:
Wie Sie Ihre Angular-App in ein Docker-Image packen und als Container zur Ausführung bringen.
Vergessen Sie Ihre Sorgen über den korrekten Build und das richtige Deployment!
Dies ist der 2. Teil unserer vierteiligen Artikelserie zu Angular und Docker."><meta name="twitter:site" content="@angular_buch"><meta property="og:locale" content="de"><meta property="og:type" content="website"><meta property="og:url" content="https://angular-buch.com/blog/2019-12-docker1-simple-case"><style>.width-6{width:6.5rem}.width-8{width:8rem}.linkImage{margin-right:3px;margin-top:-3px}
</style><style>.content img{max-width:100%}.details-page-autor{margin-top:-110px}.details-thumbnail{margin-bottom:-18px}.details-thumbnail .details-thumbnail-inner{border-bottom:23px solid #dfdede;max-height:300px;overflow:hidden;background-color:#fff;border-radius:4px;display:flex;justify-content:center}.details-thumbnail .details-thumbnail-inner .darken-overlay{display:block;position:absolute;height:300px;width:100%;padding-left:15px;padding-right:15px;padding-bottom:23px}.details-thumbnail .details-thumbnail-inner .darken-overlay div{display:block;position:relative;width:100%;height:100%;background-color:#0003;border-radius:4px 4px 0 0/4px 4px 0px 0px}.details-thumbnail img{width:100%;align-self:center}.video-container{position:relative;padding-bottom:56.25%;padding-top:0;height:0;overflow:hidden;margin-top:2rem;margin-bottom:2rem}.video-container iframe,.video-container object,.video-container embed{position:absolute;top:0;left:0;width:100%;height:100%}
</style><meta property="og:image" content="https://website-articles.angular-buch.com/blog/2019-12-docker1-simple-case/header1.jpg"><meta name="twitter:image" content="https://website-articles.angular-buch.com/blog/2019-12-docker1-simple-case/header1.jpg"><meta name="twitter:card" content="summary_large_image"><script>window['ScullyIO']='generated';</script></head>
<body scully-version="0.0.0">
  <app-root ng-version="17.3.1"><header><div class="nav__overlay"></div><div class="container"><div class="row no-gutters align-items-center"><div class="col-6 col-md-2"><a routerlink="/" aria-label="Startseite" href="/"><img src="assets/img/brand-400.png" alt="Angular-Buch.com" height="40" width="126" class="img-fluid"></a></div><div class="col-6 col-md-10"><nav><ul><li><app-link><!----><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/"><!----> Buch </a><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/blog" class="nav__current" aria-current="page"><!----> Blog </a><!----><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/material"><!----> Begleitmaterial </a><!----><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/kaufen"><img alt="" class="linkImage ls-is-cached lazyloaded" data-src="assets/img/symbol-basket.svg" src="assets/img/symbol-basket.svg"><!----> Jetzt kaufen </a><!----><!----><!----></app-link></li><li><app-link><!----><a class="order" href="//angular.schule/"><img alt="" class="linkImage ls-is-cached lazyloaded" data-src="assets/img/symbol-group.svg" src="assets/img/symbol-group.svg"><!----> Schulungen </a><!----><!----><!----><!----></app-link></li><!----></ul></nav><a href="/" aria-label="Navigation" class="nav__toggle"><img src="assets/img/symbol-menu.svg" alt=""></a></div></div></div></header><main><router-outlet></router-outlet><app-blog-details><app-hero-header headline="Blog" headlinelink="/blog"><section class="hero hero--smaller"><div class="hero__lines"><div class="container"><div class="row justify-content-between"><div class="col-md-6 col-xs-12"><h1 class="headline__page headline__page--blank headline__page--space-bottom"><a style="color: white;" href="/blog">Blog</a><!----><!----></h1></div></div></div></div></section><a name="content" id="content"></a></app-hero-header><section class="index index--list blog mt-n5"><div class="index__stripe index__stripe--list"><div class="container"><a name="post" id="post"></a><div class="row details-thumbnail"><div class="col-12"><div class="details-thumbnail-inner"><img alt="" class="img-fluid rounded lazyloaded" data-src="https://website-articles.angular-buch.com/blog/2019-12-docker1-simple-case/header1.jpg" src="https://website-articles.angular-buch.com/blog/2019-12-docker1-simple-case/header1.jpg"><!----></div></div><!----></div><div class="row"><div class="col-12"><div class="index__item index__item--list"><div class="row align-items-top"><div class="col-12 col-sm-3 col-md-2 text-center details-page-autor"><img alt="" class="blog__portrait img-fluid rounded-circle lazyloaded" data-src="//www.gravatar.com/avatar/4d89f498c1a638682a07b73648c0d3b5?size=200&amp;rating=pg&amp;d=mm" src="//www.gravatar.com/avatar/4d89f498c1a638682a07b73648c0d3b5?size=200&amp;rating=pg&amp;d=mm"><span class="blog__author">Michael Kaaden <br><a target="_blank" class="twitter" href="https://twitter.com/angular_schule"> @angular_schule</a> &nbsp; <!----></span></div><div class="col-12 col-sm-9 col-md-10 col-lg-10"><h1 class="blog__headline">[Docker Serie 2/4] Angular-App über Docker bereitstellen</h1><p class="blog__date">09.12.2019</p><p class="content markdown-body"><p><strong>First Steps:
Wie Sie Ihre Angular-App in ein Docker-Image packen und als Container zur Ausführung bringen.
Vergessen Sie Ihre Sorgen über den korrekten Build und das richtige Deployment!
Dies ist der 2. Teil unserer vierteiligen Artikelserie zu Angular und Docker.</strong></p>
<p>Inhaltsverzeichnis:</p>
<ul>
<li><a href="/blog/2019-12-docker1-simple-case#konfiguration-des-webservers">Konfiguration des Webservers</a></li>
<li><a href="/blog/2019-12-docker1-simple-case#das-dockerfile">Das Dockerfile</a></li>
<li><a href="/blog/2019-12-docker1-simple-case#das-build-skript">Das Build-Skript</a></li>
<li><a href="/blog/2019-12-docker1-simple-case#den-container-starten">Den Container starten</a></li>
<li><a href="/blog/2019-12-docker1-simple-case#ausblick">Ausblick</a></li>
</ul>
<blockquote>
<p>Sie finden den Code zum Artikel auf
<a href="https://github.com/MichaelKaaden/dockerized-app/tree/master/Part-1-Simple-Case">GitHub</a>.</p>
</blockquote>
<p>Es ist ganz einfach, eine Angular-App zu "dockerisieren". Sie brauchen keinerlei Code in Ihrer App zu ändern, um sie in einem Docker-Container zu betreiben.
Sie müssen lediglich die Dateien hinzufügen, die ich Ihnen in diesem Artikel vorstelle.</p>
<h2 id="konfiguration-des-webservers">Konfiguration des Webservers</h2>
<p>Als Webserver werden wir <a href="http://nginx.org/">nginx</a> verwenden.
Keine Sorge, wenn Sie diesen noch nie selbst benutzt, geschweige denn konfiguriert haben.
Erstellen Sie im Wurzelverzeichnis Ihrer App ein Verzeichnis namens <code>nginx</code> und legen Sie darin eine Datei namens <code>default.conf</code> mit folgendem Inhalt an:</p>
<pre><code class="language-nginx">server {
  listen <span class="hljs-number">80</span>;
  server_name localhost;

  location / {
    root <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/nginx/</span>html;
    index index.html;

    try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span><span class="hljs-regexp">/ /i</span>ndex.html;
  }
}
</code></pre>
<p>Im Wesentlichen besagt diese Konfiguration, dass der Webserver <em>im Container</em>
auf Port 80 lauschen wird, die App im Verzeichnis <code>/usr/share/nginx/html</code> abgelegt ist und jeder URL auf <code>/index.html</code> "umgebogen" wird.
Im Betrieb können Sie den Container auf jedem beliebigen Port Ihres Rechners betreiben.
Dieser Port wird dann an den Container-Port 80 weitergeleitet und landet damit auf dem Webserver im Container.</p>
<h2 id="das-dockerfile">Das Dockerfile</h2>
<p>Als nächstes erstellen Sie ebenfalls im Wurzelverzeichnis Ihrer App eine Datei
namens <code>Dockerfile</code>.
Docker verwendet diese Datei, um ein Image mit Ihrer App zu erstellen.</p>
<pre><code class="language-dockerfile"><span class="hljs-keyword">FROM</span> nginx
LABEL maintainer=<span class="hljs-string">"Ihr Name &lt;you@your.domain&gt;"</span>
<span class="hljs-keyword">COPY</span> nginx<span class="hljs-regexp">/default.conf /</span>etc<span class="hljs-regexp">/nginx/</span>conf.d
<span class="hljs-keyword">COPY</span> dist<span class="hljs-regexp">/dockerized-app /u</span>sr<span class="hljs-regexp">/share/</span>nginx/html
</code></pre>
<p>Diese Datei verwendet das jeweils neueste <code>nginx</code>-Image als Basis, setzt darin Ihren Namen als den des Zuständigen, kopiert die Konfigurationsdatei und schließlich Ihre (bereits gebaute) Angular-App in das Image.
Falls Sie diese Anleitung mit Ihrer eigenen App nachvollziehen, setzen Sie für <code>dist/dockerized-app</code> bitte das entsprechende Verzeichnis Ihrer App ein.</p>
<p>Damit könnten wir das Docker-Image nun bereits bauen.
Um den nötigen Zeitaufwand zum Bau zu verringern, sollten Sie eine Datei <code>.dockerignore</code> folgenden Inhalts erstellen, um zu verhindern, dass dabei jedes Mal unnötige Dateien und Verzeichnisse vom Docker-Daemon verarbeitet werden:</p>
<pre><code><span class="hljs-selector-class">.dockerignore</span>
<span class="hljs-selector-class">.editorconfig</span>
<span class="hljs-selector-class">.git</span>
<span class="hljs-selector-class">.gitignore</span>
<span class="hljs-selector-class">.idea</span>
README<span class="hljs-selector-class">.md</span>
angular<span class="hljs-selector-class">.json</span>
coverage
e2e
node_modules
package<span class="hljs-selector-class">.json</span>
package-lock<span class="hljs-selector-class">.json</span>
<span class="hljs-attribute">src</span>
tsconfig<span class="hljs-selector-class">.json</span>
tslint<span class="hljs-selector-class">.json</span>
yarn.lock
</code></pre>
<h2 id="das-build-skript">Das Build-Skript</h2>
<p>Das Docker-Image mit Ihrer App können Sie nun erstellen, indem Sie folgende Beschwörungsformeln in der angegebenen Reihenfolge murmeln: <code>npm install</code> (oder <code>yarn install</code>, wenn Sie Ihre Pakete stattdessen mit <code>yarn</code> verwalten), <code>ng build --prod</code> und schließlich <code>docker build -t dockerized-app .</code> (bitte vergessen Sie den Punkt am Ende nicht!).
Auch hier sollten Sie das <code>dockerized-app</code> durch den Namen Ihrer App ersetzen, denn unter diesem Namen legt Docker das Image auf Ihrem Rechner ab.</p>
<p>Ich bin ein großer Fan davon, all die Schritte zu automatisieren, die ich ständig wiederholen muss. Deshalb habe ich diese Schritte in einem Skript <code>dockerize.sh</code> zusammengefasst:</p>
<pre><code class="language-bash"><span class="hljs-meta">#!/bin/bash</span>
yarn install
ng build --prod
docker build -t dockerized-app .
</code></pre>
<p>Sollten Sie statt auf macOS oder Linux auf Windows unterwegs sein, müssen Sie stattdessen ein Batch-File oder ein PowerShell-Skript mit entsprechender Syntax verwenden.</p>
<p>Am besten ist es, wenn Sie das Skript gleich ausprobieren. Bei mir sieht das so aus:</p>
<pre><code class="language-console">$ ./dockerize<span class="hljs-selector-class">.sh</span>
yarn install v1.<span class="hljs-number">13.0</span>
<span class="hljs-selector-attr">[1/4]</span> 🔍  Resolving packages...
success Already up-to-date.
✨  Done <span class="hljs-keyword">in</span> <span class="hljs-number">0.41s</span>.

Date: <span class="hljs-number">2019</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span>T14:<span class="hljs-number">56</span>:<span class="hljs-number">24.367</span>Z
Hash: e6105fbbd24ce43b0f57
Time: <span class="hljs-number">10178ms</span>
chunk {<span class="hljs-number">0</span>} runtime<span class="hljs-selector-class">.a5dd35324ddfd942bef1</span><span class="hljs-selector-class">.js</span> (runtime) <span class="hljs-number">1.41</span> kB <span class="hljs-selector-attr">[entry]</span> <span class="hljs-selector-attr">[rendered]</span>
chunk {<span class="hljs-number">1</span>} es2015-polyfills.<span class="hljs-number">358</span>ed1827c991dd2afb0<span class="hljs-selector-class">.js</span> (es2015-polyfills) <span class="hljs-number">56.4</span> kB <span class="hljs-selector-attr">[initial]</span> <span class="hljs-selector-attr">[rendered]</span>
chunk {<span class="hljs-number">2</span>} <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.e87fb3df99e6b4b142c4</span><span class="hljs-selector-class">.js</span> (main) <span class="hljs-number">239</span> kB <span class="hljs-selector-attr">[initial]</span> <span class="hljs-selector-attr">[rendered]</span>
chunk {<span class="hljs-number">3</span>} polyfills.<span class="hljs-number">407</span>a467dedb63cfdd103<span class="hljs-selector-class">.js</span> (polyfills) <span class="hljs-number">41</span> kB <span class="hljs-selector-attr">[initial]</span> <span class="hljs-selector-attr">[rendered]</span>
chunk {<span class="hljs-number">4</span>} styles.<span class="hljs-number">3</span>ff695c00d717f2d2a11<span class="hljs-selector-class">.css</span> (styles) <span class="hljs-number">0</span> bytes <span class="hljs-selector-attr">[initial]</span> <span class="hljs-selector-attr">[rendered]</span>

Sending build context to Docker daemon  <span class="hljs-number">393.7</span>kB
Step <span class="hljs-number">1</span>/<span class="hljs-number">4</span> : FROM nginx
 ---&gt; <span class="hljs-number">42</span>b4762643dc
Step <span class="hljs-number">2</span>/<span class="hljs-number">4</span> : LABEL maintainer=<span class="hljs-string">"Michael Kaaden &lt;github@kaaden.net&gt;"</span>
 ---&gt; Using cache
 ---&gt; ebd7affcf553
Step <span class="hljs-number">3</span>/<span class="hljs-number">4</span> : COPY nginx/default<span class="hljs-selector-class">.conf</span> /etc/nginx/conf<span class="hljs-selector-class">.d</span>
 ---&gt; Using cache
 ---&gt; <span class="hljs-number">65</span>b24d481385
Step <span class="hljs-number">4</span>/<span class="hljs-number">4</span> : COPY dist/dockerized-app /usr/share/nginx/<span class="hljs-selector-tag">html</span>
 ---&gt; Using cache
 ---&gt; a6f5cd965884
Successfully built a6f5cd965884
Successfully tagged dockerized-app:latest
</code></pre>
<p>Damit sollte auf Ihrer Docker-Instanz ein Image namens <code>dockerized-app</code> vorliegen.
Sie können das mit dem Befehl <code>docker images</code> überprüfen:</p>
<pre><code class="language-console">$ docker images
REPOSITORY      <span class="hljs-keyword">TAG</span>     <span class="hljs-title">IMAGE</span> ID       CREATED         SIZE
dockerized-app  latest  <span class="hljs-number">419869</span>cfab04   <span class="hljs-number">10</span> seconds ago  <span class="hljs-number">110M</span>B
</code></pre>
<h2 id="den-container-starten">Den Container starten</h2>
<p>Wir wollen nun einen Container auf Basis des eben erzeugten Images starten.
Zur Erinnerung: Container zu Image verhält sich wie Instanz zu Klasse in der objektorientierten Programmierung.
Verwenden Sie den Befehl <code>docker run -p 8093:80 -d --name web dockerized-app</code>, um einen Container zu erstellen.
Er stellt einen Container namens <code>web</code> auf Ihrem Rechner auf Port 8093 bereit.
Ihr Browser sollte Ihre App also unter <code>http://localhost:8093/</code> anzeigen, falls sie den Container auf Ihrer Workstation gestartet haben.
Ansonsten verwenden Sie natürlich den passenden Rechnernamen statt <code>localhost</code>.</p>
<p>Um den Container wieder zu stoppen, geben Sie <code>docker stop web</code> ein.
Alle laufenden Container können Sie jederzeit mit dem Befehl <code>docker ps</code> anzeigen.</p>
<p>Auch das Erstellen eines Containers können wir über ein Skript automatisieren.
Gerade für komplexere Szenarien mit mehreren Containern hat Docker das Tool <a href="https://docs.docker.com/compose/">docker-compose</a> entwickelt.
Für unseren vereinfachten Anwendungsfall mit nur einem Service sieht die zu obigem Aufruf
über die Kommandozeile identische Konfigurationsdatei <code>docker-compose.yml</code> folgendermaßen aus:</p>
<pre><code class="language-yaml"><span class="hljs-symbol">version:</span> <span class="hljs-string">"3"</span>
<span class="hljs-symbol">
services:</span>
<span class="hljs-symbol">    web:</span>
<span class="hljs-symbol">        image:</span> dockerized-app
<span class="hljs-symbol">        ports:</span>
            - <span class="hljs-string">"8093:80"</span>
</code></pre>
<p>Um Ihren Container zu starten, verwenden Sie nun einfach den Befehl <code>docker-compose up -d</code>.
Vergessen Sie bitte nicht das <code>-d</code>, da Ihr Container sonst im Vordergrund läuft und Sie Ihre Shell solange nicht mehr nutzen können, bis der Container beendet ist.
Das erreichen Sie übrigens mit <code>docker-compose down</code>.</p>
<p>Jedes Mal, wenn Sie Ihre App ändern, müssen Sie ein neues Image bauen.
Das geht schnell, da alle Images aus Schichten (engl. <em>layers</em>) bestehen, die von Docker zwischengespeichert werden.
Unsere Änderung betrifft allerdings nur die letzte Schicht (die mit dem
<code>COPY dist/dockerized-app /usr/share/nginx/html</code>), sodass auch nur diese Schicht neu gebaut wird.
Um dieses neueste Image zur Ausführung zu bringen, müssen Sie den alten Container erst beenden und den neuen starten.
Auch hier bietet sich ein Skript an, ich nenne es <code>redeploy.sh</code>:</p>
<pre><code class="language-bash"><span class="hljs-meta">#! /bin/bash</span>
docker-compose down --remove-orphans
docker-compose up -d
</code></pre>
<p>Damit haben Sie alles Nötige zur Hand, um Ihre App sinnvoll in einem Docker-Container zu betreiben.</p>
<h2 id="ausblick">Ausblick</h2>
<p>Die Artikelserie besteht aus den folgenden Teilen:</p>
<ol>
<li><a href="https://angular-buch.com/blog/2019-12-docker0-intro">Angular-Apps und Docker: Einleitung</a></li>
<li><a href="https://angular-buch.com/blog/2019-12-docker1-simple-case">Angular-App über Docker bereitstellen</a> <strong>(der aktuelle Artikel)</strong></li>
<li><a href="https://angular-buch.com/blog/2019-12-docker2-build-once-run-anywhere">Build Once, Run Anywhere oder: Konfiguration über Docker verwalten</a></li>
<li><a href="https://angular-buch.com/blog/2019-12-docker3-multi-stage-build">Multi-Stage Builds oder: Immer die Build-Umgebung dabei haben</a></li>
</ol>
<p>Im nächsten Artikel zeige ich Ihnen, wie Sie Ihre App von Docker aus konfigurieren können.
Das ist dann wichtig, wenn Sie beispielsweise gegen ein Backend programmieren und den URL zum Backend über Docker vorgeben möchten.</p>
<br>
<hr>

<p><small><strong>Titelbild:</strong> Bild von <a href="https://unsplash.com/@guibolduc">Guillaume Bolduc</a> auf <a href="https://unsplash.com">Unsplash</a>, bearbeitet</small></p>
</p><!----><!----><a routerlink="/blog" ripple-radius="" class="btn btn-sm btn-primary mt-4" href="/blog"><i class="fa fa-backward mr-2"></i> Zurück</a><hr> Suggestions? Feedback? Bugs? Please <a target="_blank" class="content" href="https://github.com/angular-buch/website-articles/blob/gh-pages/blog/2019-12-docker1-simple-case/README.md"><i class="fa fa-github mr-1" style="font-size: 1.6rem; position: relative; bottom: -3px;"></i>fork/edit this page on Github</a>. </div></div></div></div></div><div class="row" style="margin-top: -20px;"><div class="col-12"><div class="index__item index__item--list"><div class="row align-items-top"><div class="col-12 col-sm-3 col-md-2 text-center"><img alt="" class="blog__portrait img-fluid rounded-circle lazyload" data-src="//www.gravatar.com/avatar/4d89f498c1a638682a07b73648c0d3b5?size=200&amp;rating=pg&amp;d=mm" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><span class="blog__author">Michael Kaaden <br><a target="_blank" class="twitter" href="https://twitter.com/angular_schule"> @angular_schule</a> &nbsp; <!----></span></div><div class="col-12 col-sm-9 col-md-10 col-lg-10"><h2>Über den Autor</h2><p class="content"> Michael Kaaden ist als Software-Architekt und Manager für ein mittelständisches Unternehmen in Nürnberg tätig. Dort ist er für die technische Seite einer Cloud-Produktline verantwortlich. In dieser Eigenschaft kümmert er sich trotz seiner grundsätzlichen Affinität zu Angular nicht nur um Frontends, sondern neben der Gesamtarchitektur unter anderem auch um APIs, Backends, Datenbanken sowie Software-Entwicklungs- und Build-Prozesse. Wenn er in seiner Freizeit nicht gerade mit seiner Familie unterwegs ist, Full-Stack Developer spielt oder seine Nase in neue Technologien steckt, versucht er, seinen Laufstil zu verbessern und endlich den für ihn perfekten Fotoapparat zu finden. </p></div></div></div></div></div><!----></div><!----><!----></div></section><app-json-ld><script type="application/ld+json">{
  "url": "https://angular.schule/blog/2019-12-docker1-simple-case",
  "headline": "[Docker Serie 2/4] Angular-App über Docker bereitstellen",
  "description": "First Steps:\nWie Sie Ihre Angular-App in ein Docker-Image packen und als Container zur Ausführung bringen.\nVergessen Sie Ihre Sorgen über den korrekten Build und das richtige Deployment!\nDies ist der 2. Teil unserer vierteiligen Artikelserie zu Angular und Docker.",
  "datePublished": "2019-12-09",
  "dateModified": "2019-12-09",
  "publisher": {
    "name": "Angular-Buch",
    "url": "https://angular-buch.com",
    "@type": "Organization",
    "logo": {
      "@type": "ImageObject",
      "url": "https://angular-buch.com/assets/img/brand_export.png"
    }
  },
  "image": "https://website-articles.angular-buch.com/blog/2019-12-docker1-simple-case/header1.jpg",
  "thumbnailUrl": "https://website-articles.angular-buch.com/blog/2019-12-docker1-simple-case/header1.jpg",
  "author": {
    "@type": "Person",
    "name": "Michael Kaaden",
    "email": "blog@kaaden.net"
  },
  "keywords": [
    "Docker",
    "nginx",
    "Build",
    "docker-compose"
  ],
  "mainEntityOfPage": "http://schema.org/WebPage",
  "@type": "Article",
  "@context": "http://schema.org"
}</script></app-json-ld></app-blog-details><!----><footer><div class="container"><div class="row align-items-center"><div class="col-sm-9"><div class="links"><app-link><!----><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/"><!----> Home </a><!----><!----></app-link>|<!----><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/impressum"><!----> Impressum </a><!----><!----><!----></app-link>|<!----><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/datenschutz"><!----> Datenschutzerklärung </a><!----><!----><!----></app-link>|<!----><app-link><!----><a class="links__item links__twitter" href="https://twitter.com/angular_buch" rel="nofollow"><!----> Twitter </a><!----><!----><!----><!----></app-link><!----><!----></div></div><div class="col-sm-3 text-right"></div></div></div></footer></main><app-json-ld><script type="application/ld+json"></script></app-json-ld></app-root>
<script src="polyfills-LZBJRJJE.js" type="module"></script><script src="main-3GBHPJS6.js" type="module"></script>

</body></html>