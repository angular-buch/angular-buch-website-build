<!DOCTYPE html><html lang="de"><head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#"><meta name="generator" content="Scully 0.0.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <title>Angular-Buch ‚Üí Angular 5: Den BookMonkey upgraden</title>
  

  

  <meta property="book:author" content="https://www.facebook.com/ferdinand.malcher">
  <meta property="book:author" content="https://www.facebook.com/johannes.hoppe">

  <meta property="book:isbn" content="9783864909467">
  <meta property="book:release_date" content="2023-02-28">
  <meta property="book:tag" content="Angular">
  <meta property="book:tag" content="Webentwicklung">
  <meta property="book:tag" content="AngularJS">
  <meta property="book:tag" content="TypeScript">
  <meta property="book:tag" content="JavaScript">
  <meta property="book:tag" content="HTML5">
  <meta property="book:tag" content="CSS">
  <meta property="book:tag" content="RxJS">
  <meta property="book:tag" content="Redux">
  <meta property="book:tag" content="NgRx">

  <base href="/">
<style>@font-face{font-family:Roboto;src:url(Roboto-Thin.3025beb410a67d09.eot);src:local("Roboto Thin"),local("Roboto-Thin"),url(Roboto-Thin.3025beb410a67d09.eot?#iefix) format("embedded-opentype"),url(Roboto-Thin.a529f43f8b43a41b.woff2) format("woff2"),url(Roboto-Thin.0cfb6189823d7275.woff) format("woff"),url(Roboto-Thin.94d67324d95f59e5.ttf) format("truetype"),url(Roboto-Thin.761d85cbad1d4c0a.svg#Roboto) format("svg");font-weight:100;font-style:normal}@font-face{font-family:Roboto;src:url(Roboto-ThinItalic.3c0494ed5066eddf.eot);src:local("Roboto ThinItalic"),local("Roboto-ThinItalic"),url(Roboto-ThinItalic.3c0494ed5066eddf.eot?#iefix) format("embedded-opentype"),url(Roboto-ThinItalic.7d4425d4f9dfbd4d.woff2) format("woff2"),url(Roboto-ThinItalic.72445820525e265f.woff) format("woff"),url(Roboto-ThinItalic.72ab0263ccb0dc3f.ttf) format("truetype"),url(Roboto-ThinItalic.7d3f4f17bca5edb0.svg#Roboto) format("svg");font-weight:100;font-style:italic}@font-face{font-family:Roboto;src:url(Roboto-Light.9cff5f27f6ad3d59.eot);src:local("Roboto Light"),local("Roboto-Light"),url(Roboto-Light.9cff5f27f6ad3d59.eot?#iefix) format("embedded-opentype"),url(Roboto-Light.7117d83fbb0aa28a.woff2) format("woff2"),url(Roboto-Light.2188ea3f3f8ab51a.woff) format("woff"),url(Roboto-Light.5605865fb101be1a.ttf) format("truetype"),url(Roboto-Light.775a1d8f32378e56.svg#Roboto) format("svg");font-weight:300;font-style:normal}@font-face{font-family:Roboto;src:url(Roboto-LightItalic.4a75ae9969c094a3.eot);src:local("Roboto LightItalic"),local("Roboto-LightItalic"),url(Roboto-LightItalic.4a75ae9969c094a3.eot?#iefix) format("embedded-opentype"),url(Roboto-LightItalic.9669ba38989190d7.woff2) format("woff2"),url(Roboto-LightItalic.ead2698c38e2d858.woff) format("woff"),url(Roboto-LightItalic.ccdc52ada30d970f.ttf) format("truetype"),url(Roboto-LightItalic.293a6c412ebb5682.svg#Roboto) format("svg");font-weight:300;font-style:italic}@font-face{font-family:Roboto;src:url(Roboto-Regular.b21a0eefbec4f57f.eot);src:local("Roboto Regular"),local("Roboto-Regular"),url(Roboto-Regular.b21a0eefbec4f57f.eot?#iefix) format("embedded-opentype"),url(Roboto-Regular.e64b7e5db276537f.woff2) format("woff2"),url(Roboto-Regular.2313f68c10458709.woff) format("woff"),url(Roboto-Regular.b796ce65a81adc41.ttf) format("truetype"),url(Roboto-Regular.18c20975d2f2578c.svg#Roboto) format("svg");font-weight:400;font-style:normal}@font-face{font-family:Roboto;src:url(Roboto-RegularItalic.e6e0d5b40d74c833.eot);src:local("Roboto RegularItalic"),local("Roboto-RegularItalic"),url(Roboto-RegularItalic.e6e0d5b40d74c833.eot?#iefix) format("embedded-opentype"),url(Roboto-RegularItalic.d448549043fc24e3.woff2) format("woff2"),url(Roboto-RegularItalic.6c93c3855305929c.woff) format("woff"),url(Roboto-RegularItalic.c6469a92f47f72b9.ttf) format("truetype"),url(Roboto-RegularItalic.f83754e74962d444.svg#Roboto) format("svg");font-weight:400;font-style:italic}@font-face{font-family:Roboto;src:url(Roboto-Medium.9a9c9421bcdef79c.eot);src:local("Roboto Medium"),local("Roboto-Medium"),url(Roboto-Medium.9a9c9421bcdef79c.eot?#iefix) format("embedded-opentype"),url(Roboto-Medium.31c42d9dbee477e5.woff2) format("woff2"),url(Roboto-Medium.769ea541b3eef14d.woff) format("woff"),url(Roboto-Medium.03501557d620ee6b.ttf) format("truetype"),url(Roboto-Medium.8a59a67632175b0b.svg#Roboto) format("svg");font-weight:500;font-style:normal}@font-face{font-family:Roboto;src:url(Roboto-MediumItalic.eda8bf9be9c607a9.eot);src:local("Roboto MediumItalic"),local("Roboto-MediumItalic"),url(Roboto-MediumItalic.eda8bf9be9c607a9.eot?#iefix) format("embedded-opentype"),url(Roboto-MediumItalic.2b1343b2d0b09b92.woff2) format("woff2"),url(Roboto-MediumItalic.226e2a5000081685.woff) format("woff"),url(Roboto-MediumItalic.ce75fe30feef2519.ttf) format("truetype"),url(Roboto-MediumItalic.b51310a741b5d779.svg#Roboto) format("svg");font-weight:500;font-style:italic}@font-face{font-family:Roboto;src:url(Roboto-Bold.0d2870f5e1759c7a.eot);src:local("Roboto Bold"),local("Roboto-Bold"),url(Roboto-Bold.0d2870f5e1759c7a.eot?#iefix) format("embedded-opentype"),url(Roboto-Bold.6980f6575e8c2cbd.woff2) format("woff2"),url(Roboto-Bold.313d5de65a92aae6.woff) format("woff"),url(Roboto-Bold.ed694f411e0b3a82.ttf) format("truetype"),url(Roboto-Bold.a5d983d959171823.svg#Roboto) format("svg");font-weight:700;font-style:normal}@font-face{font-family:Roboto;src:url(Roboto-BoldItalic.24d4fc9379818f4d.eot);src:local("Roboto BoldItalic"),local("Roboto-BoldItalic"),url(Roboto-BoldItalic.24d4fc9379818f4d.eot?#iefix) format("embedded-opentype"),url(Roboto-BoldItalic.986a9dba772d1a7a.woff2) format("woff2"),url(Roboto-BoldItalic.d0b1358f293918c7.woff) format("woff"),url(Roboto-BoldItalic.e3188bd071401a05.ttf) format("truetype"),url(Roboto-BoldItalic.98e79b0548caa896.svg#Roboto) format("svg");font-weight:700;font-style:italic}@font-face{font-family:Roboto;src:url(Roboto-Black.2a430d2577a70997.eot);src:local("Roboto Black"),local("Roboto-Black"),url(Roboto-Black.2a430d2577a70997.eot?#iefix) format("embedded-opentype"),url(Roboto-Black.710dab121b2a7bc2.woff2) format("woff2"),url(Roboto-Black.06740b883cfa8a2e.woff) format("woff"),url(Roboto-Black.41a719429c37346e.ttf) format("truetype"),url(Roboto-Black.711c7acb0aa346bb.svg#Roboto) format("svg");font-weight:900;font-style:normal}@font-face{font-family:Roboto;src:url(Roboto-BlackItalic.65db2fd69db01cd5.eot);src:local("Roboto BlackItalic"),local("Roboto-BlackItalic"),url(Roboto-BlackItalic.65db2fd69db01cd5.eot?#iefix) format("embedded-opentype"),url(Roboto-BlackItalic.f4307ac32c9ad43b.woff2) format("woff2"),url(Roboto-BlackItalic.fc1832915de70c44.woff) format("woff"),url(Roboto-BlackItalic.ba2ec768f43dbc84.ttf) format("truetype"),url(Roboto-BlackItalic.26186c8936090567.svg#Roboto) format("svg");font-weight:900;font-style:italic}@charset "UTF-8";:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--font-family-monospace:SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}*,*:before,*:after{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,Liberation Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}@media print{*,*:before,*:after{text-shadow:none!important;box-shadow:none!important}img{page-break-inside:avoid}@page{size:a3}body{min-width:992px!important}}body{color:#1e1e1e;font-family:"Roboto","Helvetica Neue",Helvetica,Arial sans-serif;font-size:16px;line-height:1.35em;font-weight:400;background:#F8F8F8}html{overflow-y:scroll}</style><link rel="stylesheet" href="styles.5b0c922fd58e1bd5.css" media="all" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles.5b0c922fd58e1bd5.css"></noscript><meta property="og:title" content="Angular-Buch ‚Üí Angular 5: Den BookMonkey upgraden"><meta name="twitter:title" content="Angular-Buch ‚Üí Angular 5: Den BookMonkey upgraden"><meta name="description" content="üìô Dank der Angular CLI ist es ziemlich einfach, eine neue Anwendung mit der aktuellen Version von Angular zu erstellen.
Doch was ist zu tun, wenn wir ein bestehendes Projekt auf den neuesten Stand bringen wollen?"><meta property="og:description" content="üìô Dank der Angular CLI ist es ziemlich einfach, eine neue Anwendung mit der aktuellen Version von Angular zu erstellen.
Doch was ist zu tun, wenn wir ein bestehendes Projekt auf den neuesten Stand bringen wollen?"><meta name="twitter:description" content="üìô Dank der Angular CLI ist es ziemlich einfach, eine neue Anwendung mit der aktuellen Version von Angular zu erstellen.
Doch was ist zu tun, wenn wir ein bestehendes Projekt auf den neuesten Stand bringen wollen?"><meta name="twitter:site" content="@angular_buch"><meta property="og:locale" content="de"><meta property="og:type" content="website"><meta property="og:url" content="https://angular-buch.com/blog/2017-12-book-monkey-upgrade"><style>.width-6{width:6.5rem}.width-8{width:8rem}.linkImage{margin-right:3px;margin-top:-3px}
</style><style>.content img{max-width:100%}.details-page-autor{margin-top:-110px}.details-thumbnail{margin-bottom:-18px}.details-thumbnail .details-thumbnail-inner{border-bottom:23px solid #dfdede;max-height:300px;overflow:hidden;background-color:#fff;border-radius:4px;display:flex;justify-content:center}.details-thumbnail .details-thumbnail-inner .darken-overlay{display:block;position:absolute;height:300px;width:100%;padding-left:15px;padding-right:15px;padding-bottom:23px}.details-thumbnail .details-thumbnail-inner .darken-overlay div{display:block;position:relative;width:100%;height:100%;background-color:#0003;border-radius:4px 4px 0 0/4px 4px 0px 0px}.details-thumbnail img{width:100%;align-self:center}.video-container{position:relative;padding-bottom:56.25%;padding-top:0;height:0;overflow:hidden;margin-top:2rem;margin-bottom:2rem}.video-container iframe,.video-container object,.video-container embed{position:absolute;top:0;left:0;width:100%;height:100%}
</style><style>a[_ngcontent-qca-c14]:link, a[_ngcontent-qca-c14]:visited{text-decoration:underline}a[_ngcontent-qca-c14]:hover, a[_ngcontent-qca-c14]:active{text-decoration:none}</style><meta property="og:image" content="https://website-articles.angular-buch.com/blog/2017-12-book-monkey-upgrade/../x_shared/angular5.png"><meta name="twitter:image" content="https://website-articles.angular-buch.com/blog/2017-12-book-monkey-upgrade/../x_shared/angular5.png"><meta name="twitter:card" content="summary_large_image"><script>window['ScullyIO']='generated';</script></head>
<body scully-version="0.0.0">
  <app-root ng-version="15.2.2"><header><div class="nav__overlay"></div><div class="container"><div class="row no-gutters align-items-center"><div class="col-6 col-md-2"><a routerlink="/" aria-label="Startseite" href="/"><img src="assets/img/brand.svg" alt="Angular-Buch.com" class="img-fluid" style="height: 40px;"></a></div><div class="col-6 col-md-10"><nav><ul><li><app-link><!----><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/"><!----> Buch </a><!----><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/blog" class="nav__current" aria-current="page"><!----> Blog </a><!----><!----><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/material"><!----> Begleitmaterial </a><!----><!----><!----><!----></app-link></li><li><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" href="/kaufen"><img alt="" class="linkImage ls-is-cached lazyloaded" data-src="assets/img/symbol-basket.svg" src="assets/img/symbol-basket.svg"><!----> Jetzt kaufen </a><!----><!----><!----><!----></app-link></li><li><app-link><!----><a class="order" href="//angular.schule/"><img alt="" class="linkImage ls-is-cached lazyloaded" data-src="assets/img/symbol-group.svg" src="assets/img/symbol-group.svg"><!----> Schulungen </a><!----><!----><!----><!----><!----></app-link></li><!----></ul></nav><a href="/" aria-label="Navigation" class="nav__toggle"><img src="assets/img/symbol-menu.svg" alt=""></a></div></div></div></header><main><router-outlet></router-outlet><app-blog-details><app-hero-header headline="Blog" headlinelink="/blog"><section class="hero hero--smaller"><div class="hero__lines"><div class="container"><div class="row justify-content-between"><div class="col-md-6 col-xs-12"><h1 class="headline__page headline__page--blank headline__page--space-bottom"><a style="color: white;" href="/blog">Blog</a><!----><!----></h1></div><div class="col-5 d-none d-md-block text-center"><img src="assets/img/angular.png" alt="" class="hero__angular--smaller"></div></div></div></div></section><a name="content" id="content"></a></app-hero-header><section class="index index--list blog mt-n5"><div class="index__stripe index__stripe--list"><!----><div class="container"><a name="post" id="post"></a><div class="row details-thumbnail"><div class="col-12"><div class="details-thumbnail-inner"><img alt="" class="img-fluid rounded ls-is-cached lazyloaded" data-src="https://website-articles.angular-buch.com/blog/2017-12-book-monkey-upgrade/../x_shared/angular5.png" src="https://website-articles.angular-buch.com/blog/2017-12-book-monkey-upgrade/../x_shared/angular5.png"><!----></div></div><!----></div><div class="row"><div class="col-12"><div class="index__item index__item--list"><div class="row align-items-top"><div class="col-12 col-sm-3 col-md-2 text-center details-page-autor"><img alt="" class="blog__portrait img-fluid rounded-circle lazyloaded" data-src="//www.gravatar.com/avatar/9f0a00f4661dfc8ac6cbb72092399ae1?size=200&amp;rating=pg&amp;d=mm" src="//www.gravatar.com/avatar/9f0a00f4661dfc8ac6cbb72092399ae1?size=200&amp;rating=pg&amp;d=mm"><span class="blog__author">Johannes Hoppe <br><a target="_blank" class="twitter" href="https://twitter.com/JohannesHoppe"> @JohannesHoppe</a> &nbsp; <!----><!----></span></div><div class="col-12 col-sm-9 col-md-10 col-lg-10"><h1 class="blog__headline">Angular 5: Den BookMonkey upgraden</h1><p class="blog__date">06.12.2017</p><p class="content markdown-body"><p>Dank der Angular CLI ist es ziemlich einfach, eine neue Anwendung mit der aktuellen Version von Angular zu erstellen.
Doch was ist zu tun, wenn wir ein bestehendes Projekt auf den neuesten Stand bringen wollen?</p>
<p>Im konkreten Fall werden wir in diesem Artikel das Beispielprojekt <a href="https://book-monkey2.angular-buch.com/">"BookMonkey 2"</a> aktualisieren.
Ich gehe davon aus, dass Sie den Anleitungen aus dem Buch gefolgt sind
und Sie nun den BookMonkey mit Angular 4.x und einer Version der Angular CLI unter 1.5 vorliegen haben.
Selbstverst√§ndlich werden die meisten Schritte auch f√ºr jede andere Angular-Anwendung anwendbar sein. </p>
<h2 id="1-globale-installationen-aktualisieren">1. Globale Installationen aktualisieren</h2>
<p>Falls nicht bereits geschehen, so sollten Sie unbedingt auf NPM 5.x aktualisieren.
NPM 5 ist ab Node.js 8 mit an Board. Das Angular-Buch geht noch von NPM 4 aus.
Die wichtigste Neuerung sind die automatisch erzeugten Lock-Dateien (<code>package-lock.json</code>).
Ohne gro√ües Zutun hat damit der recht ungl√ºckliche Umgang mit Versionsnummern ein Ende.
Erscheint bei Eingabe von <code>npm -v</code> eine Versionsnummer <code>5.x</code>, so ist alles perfekt.  </p>
<p>Die globale Installation der Angular CLI aktualisieren wir wie folgt:</p>
<pre><code class="language-bash"><span class="hljs-built_in">npm</span> i -g @angular/cli
ng -v
</code></pre>
<h2 id="2-generierten-dateien-aktualisieren">2. Generierten Dateien aktualisieren</h2>
<p>Beim Update auf Angular 5 hilft der <a href="https://angular-update-guide.firebaseapp.com/">Angular Update Guide</a>.
Das Tool stellt eine Checkliste und die passenden Befehle f√ºr das Update per <code>npm install</code> bereit.
Das ist formal korrekt, die Angular-Pakete sind nach Anwendung des <em>Angular Update Guide</em> auf dem aktuellen Stand.
Dies gilt jedoch nicht f√ºr die vielen Dateien, welche die Angular CLI mit dem Befehl <code>ng new</code> anlegt.
Hier tut sich st√§ndig etwas ‚Äì viele kleine Verbesserungen sind seit Fr√ºhjahr 2017 geschehen.
Leider gibt es hier kein automatisches Tooling.
Es f√ºhrt kein Weg daran vorbei:
Wir m√ºssen eine Reihe von Dateien vergleichen und ersetzen, um das gesamte Projekt aufzufrischen.</p>
<p>Zun√§chst l√∂schen wir die Datei <code>package-lock.json</code> aus dem BookMonkey-Verzeichnis ‚Äì sofern diese vorhanden ist.
Wenn dieser Schritt vergessen wird, dann werden die manuellen √Ñnderungen an der <code>package.json</code> nicht ber√ºcksichtigt.</p>
<p>Wir erzeugen nun ein zweites leeres Projekt, mit den selben Argumenten wie im Buch:</p>
<pre><code class="language-bash">ng <span class="hljs-keyword">new</span> BookMonkey -p bm -<span class="hljs-keyword">is</span> <span class="hljs-comment">--skip-install</span>
</code></pre>
<p>Neu ist das Argument <code>--skip-install</code>.
Wir ben√∂tigen keine fertige Installation mit einem vollen Ordner <code>node_modules</code>
und auch nicht die Datei <code>package-lock.json</code>!
Nun kopieren wir die frischen Blueprint-Dateien vom neuen Projekt in das alte hin√ºber.
Im Falle des BookMonkeys sind dies folgende Dateien:</p>
<ul>
<li><code>.angular-cli.json</code> ‚Äì <strong>Vorsicht!</strong></li>
<li><code>.gitignore</code></li>
<li><code>karma.conf.js</code></li>
<li><code>package.json</code> ‚Äì <strong>Vorsicht!</strong></li>
<li><code>protractor.conf.js</code></li>
<li><code>src/main.ts</code></li>
<li><code>src/polyfills.ts</code></li>
<li><code>src/test.ts</code></li>
<li><code>src/tsconfig.app.json</code></li>
<li><code>src/tsconfig.spec.json</code></li>
<li><code>tsconfig.json</code></li>
<li><code>tslint.json</code></li>
</ul>
<p>Vorsichtig m√ºssen wir bei den Dateien <code>.angular-cli.json</code> und <code>package.json</code> sein.
Hier sollten wir nicht die Dateien komplett √ºberschreiben,
denn wir haben w√§hrend der Entwicklung des BookMonkey einige Zeilen hinzugef√ºgt.
F√ºr die Einbindung des CSS-Frameworks haben wir in der Datei <code>.angular-cli.json</code>
diese Zeile im <code>styles</code>-Array hinzugef√ºgt:</p>
<pre><code><span class="hljs-string">"../node_modules/semantic-ui-css/semantic.css"</span>
</code></pre>
<p>Bei der Datei <code>package.json</code> haben wir ein paar Eintr√§ge zu den <code>scripts</code> hinzugef√ºgt
und die Abh√§ngigkeiten <code>angular-date-value-accessor</code> sowie <code>semantic-ui-css</code> eingef√ºhrt
(<code>npm i angular-date-value-accessor</code> sowie <code>npm i semantic-ui-css</code>).
Am leichtesten √ºbernimmt man die neuen Zeilen mit einem Diff-Tool.
Der Rest der genannten Dateien kann getrost √ºberschrieben werden.
Unser Diff mit einem Projekt der Angular CLI 1.0.0 sieht so aus:</p>
<ul>
<li><strong><a href="https://github.com/book-monkey2-build/iteration-7-i18n/commit/3c607f0bef8b6577029cf15dcec8fe9c6ff05874">Update CLI project to 1.5.4</a></strong></li>
</ul>
<p>Wenn Sie bereits einen neueren Stand der CLI haben, so sind bei Ihnen weniger √Ñnderungen notwendig.</p>
<p>Zur Kontrolle k√∂nnen wir noch einmal die Datei <code>package.json</code> √ºberpr√ºfen.
Unsere Datei sollte nun der Version vom Angular-CLI Schematic √§hneln: <a href="https://github.com/angular/devkit/blob/master/packages/schematics/angular/application/files/package.json">@angular-devkit/schematics	-- package.json</a></p>
<h2 id="3-i18n-kommentare-ersetzen">3. i18n-Kommentare ersetzen</h2>
<p>Zum Abschluss der Reise mit dem BookMonkey hatten wir die Anwendung internationalisiert.
In zwei Dateien haben wir einen Text √ºbersetzt, der nicht direkt von einem HTML-Element umschlossen wird.
Wir haben hierf√ºr HTML-Kommentare verwendet.
Diese magischen Kommentare sind jetzt <em>deprecated</em> und sollten durch den <code>ng-container</code> ersetzt werden (siehe <a href="https://github.com/angular/angular/pull/18998">#18998</a>).</p>
<p>Aus</p>
<pre><code class="language-html"><span class="hljs-comment">&lt;!--i18n: @@BookDetailsComponent:book delete --&gt;</span>Buch l√∂schen<span class="hljs-comment">&lt;!--/i18n--&gt;</span>
</code></pre>
<p>wird</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">ng-container</span> <span class="hljs-attr">i18n</span>=<span class="hljs-string">"@@BookDetailsComponent:book delete"</span>&gt;</span>Buch l√∂schen<span class="hljs-tag">&lt;/<span class="hljs-name">ng-container</span>&gt;</span>
</code></pre>
<p>Die √Ñnderungen sind schnell gemacht, sie sind in folgendem Diff zusammengefasst:</p>
<ul>
<li><strong><a href="https://github.com/book-monkey2-build/iteration-7-i18n/commit/6e54598b2e05aff8e804e2bce7e47577a7c3b216">Use ng-container over i18n comments</a></strong></li>
</ul>
<h2 id="4-den-neuen-httpclient-verwenden">4. Den neuen HttpClient verwenden</h2>
<p>Mit Version 4.3 des Angular-Frameworks steht der neue <code>HttpClient</code> bereit.
Dieser ersetzt den veralteten <code>Http</code>-Service (siehe <a href="https://github.com/angular/angular/pull/18906">#18906</a>).
Dem neuen <code>HttpClient</code> widmen wir uns in einem <a href="/blog/2017-11-httpclient">ausf√ºhrlichen Blogpost</a>.
Hier sind in aller K√ºrze die notwendigen √Ñnderungen:</p>
<ul>
<li><strong><a href="https://github.com/book-monkey2-build/iteration-7-i18n/commit/efd88396773ba0c5b52494e0f1aef958f7cc3c3e">Update to new HttpClient</a></strong></li>
</ul>
<h2 id="5-rxjs-pipeable-operators-verwenden">5. RxJS Pipeable Operators verwenden</h2>
<p>Mit Angular 5 kommt das Konzept der Pipeable Operators in die Angular-Welt (auch bekannt unter dem alten Namen <em>Lettable Operators</em>).
√úber die neuen Operatoren haben wir im <a href="/blog/2017-12-angular5#rxjs-pipeable-operators">Blogpost zu Angular 5</a> berichtet.</p>
<ul>
<li><strong><a href="https://github.com/book-monkey2-build/iteration-7-i18n/commit/043a3d0bb509aea3b6d714fdda75f55d7283c842">Introduce lettable RxJS operators</a></strong></li>
</ul>
<h2 id="6-lokalisierungs-daten-importieren-und-registrieren">6. Lokalisierungs-Daten importieren und registrieren</h2>
<p>Ab Angular 5 m√ºssen die verf√ºgbaren Locales einzeln importiert und registriert werden.
Daf√ºr wurde die Funktion <code>registerLocaleData()</code> eingef√ºhrt, die z.B. im <code>AppModule</code> aufgerufen werden kann:</p>
<ul>
<li><strong><a href="https://github.com/book-monkey2-build/iteration-7-i18n/commit/0e924f6ab5e540db4ce4c98f2b95c44f42a5b775">Use registerLocaleData()</a></strong></li>
</ul>
<p>Es gibt noch weitere √Ñnderungen, welche die Mehrsprachigkeit betreffen ‚Äì
wobei aber in unserem Fall keine √Ñnderungen im BookMonkey notwendig sind.
Der Blogpost <a href="/blog/2017-12-ng5-i18n">Angular 5: √Ñnderungen f√ºr i18n</a> stellt diese im Einzelnen vor.</p>
<h2 id="7-neu-das-interface-bookraw">7. Neu: Das Interface <code>BookRaw</code></h2>
<p>Ein optionales, aber sehr hilfreiches Feature sind die generischen Methoden des neuen <code>HttpClient</code>.
Im Buch haben wir noch den alten Service und damit die untypisierte Syntax verwendet:</p>
<pre><code class="language-ts"><span class="hljs-keyword">this</span>.http.<span class="hljs-keyword">get</span>(`${<span class="hljs-keyword">this</span>.api}/books`)
</code></pre>
<p>Der zur√ºck gegebene Wert ist vom Typ <code>Observable&lt;Object&gt;</code>.
TypeScript kann uns so beim Kompilieren und bei der automatischen Code-Vervollst√§ndigung kaum unterst√ºtzen.
Die neue API hat nun f√ºr jede der bekannten HTTP-Methoden eine generische Variante dabei:</p>
<pre><code class="language-ts"><span class="hljs-keyword">this</span>.http.<span class="hljs-keyword">get</span>&lt;T&gt;(`${<span class="hljs-keyword">this</span>.api}/books`)
</code></pre>
<p>Der zur√ºckgegebene Wert ist nun vom Typ <code>Observable&lt;T&gt;</code>.
Statt <code>T</code> m√ºssen wir nat√ºrlich einen existierenden Typ angeben.
In unserem Fall wollen wir ein Interface verwenden:</p>
<pre><code class="language-ts"><span class="hljs-comment">// book-raw.ts</span>
export interface <span class="hljs-class">BookRaw </span>{
<span class="hljs-symbol">  isbn:</span> string;
<span class="hljs-symbol">  title:</span> string;
<span class="hljs-symbol">  authors:</span> string[];
<span class="hljs-symbol">  published:</span> string;
<span class="hljs-symbol">  subtitle:</span> string;
<span class="hljs-symbol">  rating:</span> number;
<span class="hljs-symbol">  thumbnails:</span> {
<span class="hljs-symbol">    url:</span> string;
<span class="hljs-symbol">    title:</span> string;
  }[];
<span class="hljs-symbol">  description:</span> string;
}
</code></pre>
<p>Wir helfen damit dem Compiler auf die Spr√ºnge.
Bei allen nachfolgenden Operatoren in der RxJS-Pipeline k√∂nnen wir nun auf automatische Code-Vervollst√§ndigung setzen. 
Wir ersparen uns aber vor allem auch eine potentielle Quelle f√ºr Laufzeitfehler ‚Äì welche stets schwer zu finden sind.
Das ganze funktioniert nat√ºrlich nur, wenn wiederum keine Tippfehler im Interface vorhanden sind ‚Äì TypeScript muss uns hier weiterhin "blind" vertrauen.</p>
<p>Auch diese optionalen √Ñnderungen finden Sie in auf GitHub:</p>
<ul>
<li><strong><a href="https://github.com/book-monkey2-build/iteration-7-i18n/commit/f2d380af5171f079d37036370d03d6538e2f18f8">Introduce interface BookRaw for HTTP response</a></strong></li>
</ul>
<h2 id="8-geschafft">8. Geschafft!</h2>
<p>Herzlichen Gl√ºckwunsch!
Der BookMonkey ist auf dem neuesten Stand und wurde auch gleich noch ein wenig modernisiert.
Das gesamte finale Projekt k√∂nnen Sie hier herunterladen:</p>
<ul>
<li><a href="https://github.com/book-monkey2-build/iteration-7-i18n/archive/master.zip">Der finale BookMonkey 2 (ZIP)</a></li>
</ul>
<p><strong>Ich w√ºnsche Ihnen weiterhin viel Spa√ü mit Angular 5 und unserem Buch.</strong></p>
</p><!----><!----><a routerlink="/blog" ripple-radius="" class="btn btn-sm btn-primary mt-4" href="/blog"><i class="fa fa-backward mr-2"></i> Zur√ºck</a><hr> Suggestions? Feedback? Bugs? Please <a target="_blank" class="content" href="https://github.com/angular-buch/website-articles/blob/gh-pages/blog/2017-12-book-monkey-upgrade/README.md"><i class="fa fa-github mr-1" style="font-size: 1.6rem; position: relative; bottom: -3px;"></i>fork/edit this page on Github</a>. </div></div></div></div></div><!----></div><!----></div></section><ngx-json-ld><script type="application/ld+json">{
  "url": "https://angular.schule/blog/2017-12-book-monkey-upgrade",
  "headline": "Angular 5: Den BookMonkey upgraden",
  "description": "Dank der Angular CLI ist es ziemlich einfach, eine neue Anwendung mit der aktuellen Version von Angular zu erstellen.\nDoch was ist zu tun, wenn wir ein bestehendes Projekt auf den neuesten Stand bringen wollen?",
  "datePublished": "2017-12-06",
  "dateModified": "2017-12-06",
  "publisher": {
    "name": "Angular-Buch",
    "url": "https://angular-buch.com",
    "@type": "Organization",
    "logo": {
      "@type": "ImageObject",
      "url": "https://angular-buch.com/assets/img/brand_export.png"
    }
  },
  "image": "https://website-articles.angular-buch.com/blog/2017-12-book-monkey-upgrade/../x_shared/angular5.png",
  "thumbnailUrl": "https://website-articles.angular-buch.com/blog/2017-12-book-monkey-upgrade/../x_shared/angular5.png",
  "author": {
    "@type": "Person",
    "name": "Johannes Hoppe",
    "email": "johannes.hoppe@haushoppe-its.de"
  },
  "keywords": [
    "Angular",
    "Angular 5",
    "Angular CLI"
  ],
  "mainEntityOfPage": "http://schema.org/WebPage",
  "@type": "Article",
  "@context": "http://schema.org"
}</script></ngx-json-ld></app-blog-details><!----><footer><div class="container"><div class="row align-items-center"><div class="col-sm-9"><div class="links"><app-link><!----><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/"><!----> Home </a><!----><!----><!----></app-link>|<!----><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/impressum"><!----> Impressum </a><!----><!----><!----><!----></app-link>|<!----><app-link><!----><!----><a routerlinkactive="nav__current" ariacurrentwhenactive="page" class="links__item" href="/datenschutz"><!----> Datenschutzerkl√§rung </a><!----><!----><!----><!----></app-link>|<!----><app-link><!----><a class="links__item links__twitter" href="https://twitter.com/angular_buch" rel="nofollow"><!----> Twitter </a><!----><!----><!----><!----><!----></app-link><!----><!----></div></div><div class="col-sm-3 text-right"></div></div></div></footer></main><ngx-json-ld><script type="application/ld+json"></script></ngx-json-ld><ngx-json-ld><script type="application/ld+json"></script></ngx-json-ld></app-root>
<script src="runtime.9aeea2ed5eda4fcf.js" type="module"></script><script src="polyfills.bde724c776b9c954.js" type="module"></script><script src="main.f59bd851d3595471.js" type="module"></script>

</body></html>